<div id="readme" class="rst" data-path="README.rst"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 id="user-content-gazelle-build-file-generator" class="heading-element" dir="auto">Gazelle build file generator</h1><a id="user-content-gazelle-build-file-generator" class="anchor" aria-label="Permalink: Gazelle build file generator" href="#gazelle-build-file-generator"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Gazelle is a build file generator for Bazel projects. It can create new BUILD.bazel files for a project that follows language conventions, and it can update existing build files to include new sources, dependencies, and options. Gazelle natively supports Go and protobuf, and it may be <a href="extend.md">extended</a> to support new languages and custom rule sets.</p>
<p dir="auto">Gazelle may be run by Bazel using the <a href="#bazel-rule">gazelle rule</a>, or it may be installed and run as a command line tool. Gazelle can also generate build files for external repositories as part of the <a href="repository.md#go_repository">go_repository</a> rule.</p>
<p dir="auto"><em>Gazelle is under active development. Its interface and the rules it generates may change. Gazelle is not an official Google product.</em></p>
<p dir="auto">Mailing list: <a href="https://groups.google.com/forum/#!forum/bazel-go-discuss" rel="nofollow">bazel-go-discuss</a></p>
<p dir="auto">Slack: <a href="https://bazelbuild.slack.com/archives/CDBP88Z0D" rel="nofollow">#go on Bazel Slack</a>, <a href="https://gophers.slack.com/archives/C1SCQE54N" rel="nofollow">#bazel on Go Slack</a></p>
<p dir="auto"><em>rules_go and Gazelle are getting community maintainers! If you are a regular user of either project and are interested in helping out with development, code reviews, and issue triage, please drop by our Slack channels (linked above) and say hello!</em></p>
<div dir="auto">
<p dir="auto"><strong>Contents</strong></p>
</div>
<p dir="auto"><strong>See also:</strong></p>
<ul dir="auto">
<li><a href="Design.rst">Architecture of Gazelle</a></li>
<li><a href="repository.md">Repository rules</a>
<ul dir="auto">
<li><a href="repository.md#go_repository">go_repository</a></li>
</ul></li>
<li><a href="extend.md">Extending Gazelle</a></li>
<li><a href="https://github.com/bazelbuild/rules_go/blob/master/proto/core.rst#avoiding-conflicts">Avoiding conflicts with proto rules</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 id="user-content-supported-languages" class="heading-element" dir="auto">Supported languages</h2><a id="user-content-supported-languages" class="anchor" aria-label="Permalink: Supported languages" href="#supported-languages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Gazelle can generate Bazel BUILD files for many languages:</p>
<ul dir="auto">
<li><p dir="auto">Go</p>
<p dir="auto">Go supported is included here in bazel-gazelle, see below.</p></li>
<li><p dir="auto">Haskell</p>
<p dir="auto">Tweag's <a href="https://github.com/tweag/rules_haskell">rules_haskell</a> has two extensions: <a href="https://github.com/tweag/gazelle_cabal">gazelle_cabal</a>, for generating rules from Cabal files and <a href="https://github.com/tweag/gazelle_haskell_modules">gazelle_haskell_modules</a> for even more fine-grained build definitions.</p></li>
<li><p dir="auto">Java</p>
<p dir="auto">bazel-contrib's <a href="https://github.com/bazel-contrib/rules_jvm">rules_jvm</a> extensions include <a href="https://github.com/bazel-contrib/rules_jvm/tree/main/java/gazelle">a gazelle extension</a> for generating <code>java_library</code>, <code>java_binary</code>, <code>java_test</code>, and <code>java_test_suite</code> rules.</p></li>
<li><p dir="auto">JavaScript / TypeScript</p>
<p dir="auto">Aspect provides <a href="https://github.com/aspect-build/aspect-cli/blob/main/gazelle/js/">JavaScript and TypeScript Support</a> in aspect-cli (also usable separately).</p>
<p dir="auto">BenchSci's <a href="https://github.com/benchsci/rules_nodejs_gazelle">rules_nodejs_gazelle</a> supports generating <span>ts_project</span>, <span>js_library</span>, <span>jest_test</span>, and <span>web_asset</span> rules, and is able to support module bundlers like Webpack and Next.js</p></li>
<li><p dir="auto">Kotlin</p>
<p dir="auto">Aspect Build provides some <a href="https://github.com/aspect-build/aspect-cli/blob/main/gazelle/kotlin/">Kotlin Support</a> in the repo of their aspect-cli (also usable separately). Still under development, please check the README for currently available features.</p></li>
<li><p dir="auto">Protocol Buffers</p>
<p dir="auto">Support for the <span>proto_library</span> rule, as well as <span>go_proto_library</span> is in this repository, see below. Other language-specific proto rules are not supported here. <a href="https://github.com/stackb/rules_proto">stackb/rules_proto</a> is a good resource for these rules.</p></li>
<li><p dir="auto">Python</p>
<p dir="auto"><a href="https://github.com/bazelbuild/rules_python">rules_python</a> has an extension for generating <code>py_library</code>, <code>py_binary</code>, and <code>py_test</code> rules.</p></li>
<li><p dir="auto">R</p>
<p dir="auto"><a href="https://github.com/grailbio/rules_r">rules_r</a> has an extension for generating rules for R package builds and tests.</p></li>
<li><p dir="auto">Rust</p>
<p dir="auto"><a href="https://github.com/Calsign/gazelle_rust">gazelle_rust</a> is an extension for generating <a href="https://github.com/bazelbuild/rules_rust">rules_rust</a> targets.</p></li>
<li><p dir="auto">Starlark</p>
<p dir="auto"><a href="https://github.com/bazelbuild/bazel-skylib">bazel-skylib</a> has an extension for generating <code>bzl_library</code> rules. See <a href="https://github.com/bazelbuild/bazel-skylib/tree/master/gazelle/bzl">bazel_skylib/gazelle/bzl</a>.</p></li>
<li><p dir="auto">Swift</p>
<p dir="auto"><a href="https://github.com/cgrindel/rules_swift_package_manager">rules_swift_package_manager</a> has an extension for generating <code>swift_library</code>, <code>swift_binary</code>, and <code>swift_test</code> rules. It also includes facilities for resolving, downloading and building external Swift packages for a Bazel workspace.</p></li>
</ul>
<p dir="auto">If you know of an extension which could be linked here, please <a href="https://github.com/bazelbuild/bazel-gazelle/edit/master/README.rst">open a PR</a>!</p>
<p dir="auto">More languages can be added by <a href="extend.md">Extending Gazelle</a>. Chat with us in the <code>#gazelle</code> channel on <a href="https://slack.bazel.build" rel="nofollow">Bazel Slack</a> if you'd like to discuss your design.</p>
<p dir="auto">If you've written your own extension, please consider open-sourcing it for use by the rest of the community. Note that such extensions belong in a language-specific repository, not in bazel-gazelle. See discussion in <a href="https://github.com/bazelbuild/bazel-gazelle/issues/1030" data-hovercard-type="issue" data-hovercard-url="/bazelbuild/bazel-gazelle/issues/1030/hovercard">#1030</a>.</p>
<div class="markdown-heading" dir="auto"><h2 id="user-content-setup" class="heading-element" dir="auto">Setup</h2><a id="user-content-setup" class="anchor" aria-label="Permalink: Setup" href="#setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 id="user-content-running-gazelle-with-bazel" class="heading-element" dir="auto">Running Gazelle with Bazel</h3><a id="user-content-running-gazelle-with-bazel" class="anchor" aria-label="Permalink: Running Gazelle with Bazel" href="#running-gazelle-with-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To use Gazelle in a new project, add the <code>bazel_gazelle</code> repository and its dependencies to your WORKSPACE file and call <code>gazelle_dependencies</code>. It should look like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)

http_archive(
    name = &quot;io_bazel_rules_go&quot;,
    sha256 = &quot;80a98277ad1311dacd837f9b16db62887702e9f1d1c4c9f796d0121a46c8e184&quot;,
    urls = [
        &quot;https://mirror.bazel.build/github.com/bazelbuild/rules_go/releases/download/v0.46.0/rules_go-v0.46.0.zip&quot;,
        &quot;https://github.com/bazelbuild/rules_go/releases/download/v0.46.0/rules_go-v0.46.0.zip&quot;,
    ],
)

http_archive(
    name = &quot;bazel_gazelle&quot;,
    integrity = &quot;sha256-MpOL2hbmcABjA1R5Bj2dJMYO2o15/Uc5Vj9Q0zHLMgk=&quot;,
    urls = [
        &quot;https://mirror.bazel.build/github.com/bazelbuild/bazel-gazelle/releases/download/v0.35.0/bazel-gazelle-v0.35.0.tar.gz&quot;,
        &quot;https://github.com/bazelbuild/bazel-gazelle/releases/download/v0.35.0/bazel-gazelle-v0.35.0.tar.gz&quot;,
    ],
)


load(&quot;@io_bazel_rules_go//go:deps.bzl&quot;, &quot;go_register_toolchains&quot;, &quot;go_rules_dependencies&quot;)
load(&quot;@bazel_gazelle//:deps.bzl&quot;, &quot;gazelle_dependencies&quot;, &quot;go_repository&quot;)

############################################################
# Define your own dependencies here using go_repository.
# Else, dependencies declared by rules_go/gazelle will be used.
# The first declaration of an external repository &quot;wins&quot;.
############################################################

go_rules_dependencies()

go_register_toolchains(version = &quot;1.20.5&quot;)

gazelle_dependencies()"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:http.bzl"</span>, <span class="pl-s">"http_archive"</span>)

<span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"io_bazel_rules_go"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"80a98277ad1311dacd837f9b16db62887702e9f1d1c4c9f796d0121a46c8e184"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"https://mirror.bazel.build/github.com/bazelbuild/rules_go/releases/download/v0.46.0/rules_go-v0.46.0.zip"</span>,
        <span class="pl-s">"https://github.com/bazelbuild/rules_go/releases/download/v0.46.0/rules_go-v0.46.0.zip"</span>,
    ],
)

<span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"bazel_gazelle"</span>,
    <span class="pl-s1">integrity</span> <span class="pl-c1">=</span> <span class="pl-s">"sha256-MpOL2hbmcABjA1R5Bj2dJMYO2o15/Uc5Vj9Q0zHLMgk="</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"https://mirror.bazel.build/github.com/bazelbuild/bazel-gazelle/releases/download/v0.35.0/bazel-gazelle-v0.35.0.tar.gz"</span>,
        <span class="pl-s">"https://github.com/bazelbuild/bazel-gazelle/releases/download/v0.35.0/bazel-gazelle-v0.35.0.tar.gz"</span>,
    ],
)


<span class="pl-en">load</span>(<span class="pl-s">"@io_bazel_rules_go//go:deps.bzl"</span>, <span class="pl-s">"go_register_toolchains"</span>, <span class="pl-s">"go_rules_dependencies"</span>)
<span class="pl-en">load</span>(<span class="pl-s">"@bazel_gazelle//:deps.bzl"</span>, <span class="pl-s">"gazelle_dependencies"</span>, <span class="pl-s">"go_repository"</span>)

<span class="pl-c">############################################################</span>
<span class="pl-c"># Define your own dependencies here using go_repository.</span>
<span class="pl-c"># Else, dependencies declared by rules_go/gazelle will be used.</span>
<span class="pl-c"># The first declaration of an external repository "wins".</span>
<span class="pl-c">############################################################</span>

<span class="pl-en">go_rules_dependencies</span>()

<span class="pl-en">go_register_toolchains</span>(<span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"1.20.5"</span>)

<span class="pl-en">gazelle_dependencies</span>()</pre></div>
<p dir="auto"><code>gazelle_dependencies</code> supports optional argument <code>go_env</code> (dict-mapping) to set project specific go environment variables. If you are using a <span>WORKSPACE.bazel</span> file, you will need to specify that using:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="gazelle_dependencies(go_repository_default_config = &quot;//:WORKSPACE.bazel&quot;)"><pre><span class="pl-en">gazelle_dependencies</span>(<span class="pl-s1">go_repository_default_config</span> <span class="pl-c1">=</span> <span class="pl-s">"//:WORKSPACE.bazel"</span>)</pre></div>
<p dir="auto">Add the code below to the BUILD or BUILD.bazel file in the root directory of your repository.</p>
<p dir="auto"><strong>Important:</strong> For Go projects, replace the string after <code>prefix</code> with the portion of your import path that corresponds to your repository.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_gazelle//:def.bzl&quot;, &quot;gazelle&quot;)

# gazelle:prefix github.com/example/project
gazelle(name = &quot;gazelle&quot;)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_gazelle//:def.bzl"</span>, <span class="pl-s">"gazelle"</span>)

<span class="pl-c"># gazelle:prefix github.com/example/project</span>
<span class="pl-en">gazelle</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"gazelle"</span>)</pre></div>
<p dir="auto">After adding this code, you can run Gazelle with Bazel.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ bazel run //:gazelle"><pre class="notranslate"><code>$ bazel run //:gazelle</code></pre></div>
<p dir="auto">This will generate new BUILD.bazel files for your project. You can run the same command in the future to update existing BUILD.bazel files to include new source files or options.</p>
<p dir="auto">You can write other <code>gazelle</code> rules to run alternate commands like <code>update-repos</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="gazelle(
    name = &quot;gazelle-update-repos&quot;,
    args = [
        &quot;-from_file=go.mod&quot;,
        &quot;-to_macro=deps.bzl%go_dependencies&quot;,
        &quot;-prune&quot;,
    ],
    command = &quot;update-repos&quot;,
)"><pre><span class="pl-en">gazelle</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"gazelle-update-repos"</span>,
    <span class="pl-s1">args</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"-from_file=go.mod"</span>,
        <span class="pl-s">"-to_macro=deps.bzl%go_dependencies"</span>,
        <span class="pl-s">"-prune"</span>,
    ],
    <span class="pl-s1">command</span> <span class="pl-c1">=</span> <span class="pl-s">"update-repos"</span>,
)</pre></div>
<p dir="auto">You can also pass additional arguments to Gazelle after a <code>--</code> argument.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ bazel run //:gazelle -- update-repos -from_file=go.mod -to_macro=deps.bzl%go_dependencies"><pre class="notranslate"><code>$ bazel run //:gazelle -- update-repos -from_file=go.mod -to_macro=deps.bzl%go_dependencies</code></pre></div>
<p dir="auto">After running <code>update-repos</code>, you might want to run <code>bazel run //:gazelle</code> again, as the <code>update-repos</code> command can affect the output of a normal run of Gazelle.</p>
<p dir="auto">To verify that all BUILD files are update-to-date, you can use the <code>gazelle_test</code> rule.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_gazelle//:def.bzl&quot;, &quot;gazelle_test&quot;)

gazelle_test(
    name = &quot;gazelle_test&quot;,
    workspace = &quot;//:BUILD.bazel&quot;, # a file in the workspace root, where the gazelle will be run
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_gazelle//:def.bzl"</span>, <span class="pl-s">"gazelle_test"</span>)

<span class="pl-en">gazelle_test</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"gazelle_test"</span>,
    <span class="pl-s1">workspace</span> <span class="pl-c1">=</span> <span class="pl-s">"//:BUILD.bazel"</span>, <span class="pl-c"># a file in the workspace root, where the gazelle will be run</span>
)</pre></div>
<p dir="auto">However, please note that gazelle_test cannot be cached.</p>
<div class="markdown-heading" dir="auto"><h3 id="user-content-running-gazelle-with-go" class="heading-element" dir="auto">Running Gazelle with Go</h3><a id="user-content-running-gazelle-with-go" class="anchor" aria-label="Permalink: Running Gazelle with Go" href="#running-gazelle-with-go"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you have a Go toolchain installed, you can install Gazelle with the command below:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="go install github.com/bazelbuild/bazel-gazelle/cmd/gazelle@latest"><pre class="notranslate"><code>go install github.com/bazelbuild/bazel-gazelle/cmd/gazelle@latest</code></pre></div>
<p dir="auto">Make sure to re-run this command to upgrade Gazelle whenever you upgrade rules_go in your repository.</p>
<p dir="auto">To generate BUILD.bazel files in a new project, run the command below, replacing the prefix with the portion of your import path that corresponds to your repository.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="gazelle -go_prefix github.com/example/project"><pre class="notranslate"><code>gazelle -go_prefix github.com/example/project</code></pre></div>
<p dir="auto">Most of Gazelle's command-line arguments can be expressed as special comments in build files. See <a href="#directives">Directives</a> below. You may want to copy this line into your root build files to avoid having to type <code>-go_prefix</code> every time.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# gazelle:prefix github.com/example/project"><pre><span class="pl-c"># gazelle:prefix github.com/example/project</span></pre></div>
<div class="markdown-heading" dir="auto"><h2 id="user-content-compatibility-with-go" class="heading-element" dir="auto">Compatibility with Go</h2><a id="user-content-compatibility-with-go" class="anchor" aria-label="Permalink: Compatibility with Go" href="#compatibility-with-go"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Gazelle is compatible with supported releases of Go, per the <a href="https://golang.org/doc/devel/release.html#policy" rel="nofollow">Go Release Policy</a>. The Go Team officially supports the current and previous minor releases. Older releases are not supported and don't receive bug fixes or security updates.</p>
<p dir="auto">Gazelle may use language and library features from the oldest supported release.</p>
<div class="markdown-heading" dir="auto"><h2 id="user-content-compatibility-with-rules_go" class="heading-element" dir="auto">Compatibility with rules_go</h2><a id="user-content-compatibility-with-rules_go" class="anchor" aria-label="Permalink: Compatibility with rules_go" href="#compatibility-with-rules_go"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Gazelle generates build files that use features in newer versions of <code>rules_go</code>. Newer versions of Gazelle <em>may</em> generate build files that work with older versions of <code>rules_go</code>, but check the table below to ensure you're using a compatible version.</p>
<table>





<thead>
<tr>
<th><strong>Gazelle version</strong></th>
<th><strong>Minimum rules_go version</strong></th>
<th><strong>Maximum rules_go version</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>0.8</td>
<td>0.8</td>
<td>n/a</td>
</tr>
<tr>
<td>0.9</td>
<td>0.9</td>
<td>n/a</td>
</tr>
<tr>
<td>0.10</td>
<td>0.9</td>
<td>0.11</td>
</tr>
<tr>
<td>0.11</td>
<td>0.11</td>
<td>0.24</td>
</tr>
<tr>
<td>0.12</td>
<td>0.11</td>
<td>0.24</td>
</tr>
<tr>
<td>0.13</td>
<td>0.13</td>
<td>0.24</td>
</tr>
<tr>
<td>0.14</td>
<td>0.13</td>
<td>0.24</td>
</tr>
<tr>
<td>0.15</td>
<td>0.13</td>
<td>0.24</td>
</tr>
<tr>
<td>0.16</td>
<td>0.13</td>
<td>0.24</td>
</tr>
<tr>
<td>0.17</td>
<td>0.13</td>
<td>0.24</td>
</tr>
<tr>
<td>0.18</td>
<td>0.19</td>
<td>0.24</td>
</tr>
<tr>
<td>0.19</td>
<td>0.19</td>
<td>0.24</td>
</tr>
<tr>
<td>0.20</td>
<td>0.20</td>
<td>0.24</td>
</tr>
<tr>
<td>0.21</td>
<td>0.20</td>
<td>0.24</td>
</tr>
<tr>
<td>0.22</td>
<td>0.20</td>
<td>0.24</td>
</tr>
<tr>
<td>0.23</td>
<td>0.26</td>
<td>0.28</td>
</tr>
<tr>
<td>0.24</td>
<td>0.29</td>
<td>0.40</td>
</tr>
<tr>
<td>0.25</td>
<td>0.29</td>
<td>0.40</td>
</tr>
<tr>
<td>0.26</td>
<td>0.29</td>
<td>0.40</td>
</tr>
<tr>
<td>0.27</td>
<td>0.29</td>
<td>0.40</td>
</tr>
<tr>
<td>0.28</td>
<td>0.35</td>
<td>0.40</td>
</tr>
<tr>
<td>0.29</td>
<td>0.35</td>
<td>0.40</td>
</tr>
<tr>
<td>0.30</td>
<td>0.35</td>
<td>0.40</td>
</tr>
<tr>
<td>0.31</td>
<td>0.35</td>
<td>0.40</td>
</tr>
<tr>
<td>0.32</td>
<td><strong>0.41</strong></td>
<td>n/a</td>
</tr>
<tr>
<td>0.33</td>
<td>0.41</td>
<td>n/a</td>
</tr>
<tr>
<td>0.34</td>
<td>0.41</td>
<td>n/a</td>
</tr>
<tr>
<td>0.35</td>
<td>0.41</td>
<td>n/a</td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h2 id="user-content-usage" class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 id="user-content-command-line" class="heading-element" dir="auto">Command line</h3><a id="user-content-command-line" class="anchor" aria-label="Permalink: Command line" href="#command-line"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="gazelle &lt;command&gt; [flags...] [package-dirs...]"><pre class="notranslate"><code>gazelle &lt;command&gt; [flags...] [package-dirs...]</code></pre></div>
<p dir="auto">The first argument to Gazelle may be one of the commands below. If no command is specified, <code>update</code> is assumed. The remaining arguments are specific to each command and are documented below.</p>
<dl>
<dt><a href="#fix-and-update">update</a></dt>
<dd><p dir="auto">Scans sources files, then generates and updates build files.</p>
</dd>
<dt><a href="#fix-and-update">fix</a></dt>
<dd><p dir="auto">Same as the <code>update</code> command, but it also fixes deprecated usage of rules.</p>
</dd>
<dt><a href="#update-repos">update-repos</a></dt>
<dd><p dir="auto">Adds and updates repository rules in the WORKSPACE file.</p>
</dd>
</dl>
<div class="markdown-heading" dir="auto"><h3 id="user-content-bazel-rule" class="heading-element" dir="auto">Bazel rule</h3><a id="user-content-bazel-rule" class="anchor" aria-label="Permalink: Bazel rule" href="#bazel-rule"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Gazelle may be run via a rule. See <a href="#running-gazelle-with-bazel">Running Gazelle with Bazel</a> for setup instructions. This rule builds Gazelle and generates a wrapper script that executes Gazelle with baked-in set of arguments. You can run this script with <code>bazel run</code>, or you can copy it into your workspace and run it directly.</p>
<p dir="auto">The following attributes are available on the <code>gazelle</code> rule.</p>
<table>





<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Default value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>gazelle</span></td>
<td><em>label</em></td>
<td><code>@bazel_gazelle//cmd/gazelle</code></td>
</tr>
<tr>
<td>The <a href="extend.md#gazelle_binary">gazelle_binary</a> version of Gazelle wit</td>
<td>rule that builds Gazel h this. See `Extending</td>
<td><dl>
<dt>le. You can substitute a modified</dt>
<dd><p dir="auto">Gazelle`_.</p>
</dd>
</dl></td>
</tr>
<tr>
<td><span>external</span></td>
<td><em>string</em></td>
<td><code>external</code></td>
</tr>
<tr>
<td>The method for resolvi <code>external</code>, :va See `Dependency resolu</td>
<td>ng unknown imports to lue:<span>static</span> or :value tion`_.</td>
<td>Bazel dependencies. May be :<span>vendored</span>.</td>
</tr>
<tr>
<td><span>build_tags</span></td>
<td><em>string_list</em></td>
<td><code>[]</code></td>
</tr>
<tr>
<td>The list of Go build t</td>
<td>ags that Gazelle shoul</td>
<td>d consider to always be true.</td>
</tr>
<tr>
<td><span>prefix</span></td>
<td><em>string</em></td>
<td><code>""</code></td>
</tr>
<tr>
<td><p dir="auto">The import path that c</p>
<p dir="auto">Note: It's usually bet ``# gazelle:prefix exa this attribute.</p></td>
<td><p dir="auto">orresponds to the repo</p>
<p dir="auto">ter to write a directi mple.com/repo`` in you</p></td>
<td><p dir="auto">sitory root directory.</p>
<p dir="auto">ve like r build file instead of setting</p></td>
</tr>
<tr>
<td><span>extra_args</span></td>
<td><em>string_list</em></td>
<td><code>[]</code></td>
</tr>
<tr>
<td>A list of extra comman <code>extra_args</code> are sup ``bazel run //:gazelle See <a href="https://github.com">https://github.com</a></td>
<td>d line arguments passe pressed by extra comma -- subdir``). /bazelbuild/bazel-gaze</td>
<td><p dir="auto">d to Gazelle. Note that nd line args (e.g.</p>
<p dir="auto">lle/issues/536 for explanation.</p></td>
</tr>
<tr>
<td><span>command</span></td>
<td><em>string</em></td>
<td><code>update</code></td>
</tr>
<tr>
<td>The Gazelle command to <code>update-repos</code>.</td>
<td>use. May be :value:`f</td>
<td>ix`, <code>update</code> or</td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 id="user-content-fix-and-update" class="heading-element" dir="auto"><code>fix</code> and <code>update</code></h3><a id="user-content-fix-and-update" class="anchor" aria-label="Permalink: fix and update" href="#fix-and-update"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>update</code> command is the most common way of running Gazelle. Gazelle scans sources in directories throughout the repository, then creates and updates build files.</p>
<p dir="auto">The <code>fix</code> command does everything <code>update</code> does, but it also fixes deprecated usage of rules, analogous to <code>go fix</code>. For example, <code>cgo_library</code> will be consolidated with <code>go_library</code>. This command may delete or rename rules, so it's not on by default. See <a href="#fix-command-transformations">Fix command transformations</a> for details.</p>
<p dir="auto">Both commands accept a list of directories to process as positional arguments. If no directories are specified, Gazelle will process the current directory. Subdirectories will be processed recursively.</p>
<p dir="auto">The following flags are accepted:</p>
<table>




<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Default value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-build_file_name file1,file2,...</code></td>
<td><code>BUILD.bazel,BUILD</code></td>
</tr>
<tr>
<td>Comma-separated list of file names. Gazelle recognizes these files build files. New files will use the first name in this list. Use th your project contains non-Bazel files named <code>BUILD</code> (or <code>build</code> case-insensitive file systems).</td>
<td>as Bazel is if on</td>
</tr>
<tr>
<td><code>-build_tags tag1,tag2</code></td>
<td></td>
</tr>
<tr>
<td><p dir="auto">List of Go build tags Gazelle will consider to be true. Gazelle app constraints when generating Go rules. It assumes certain tags are t certain platforms (for example, <code>amd64,linux</code>). It assumes all Go tags are true (for example, <code>go1.8</code>). It considers other tags to (for example, <code>ignore</code>). This flag overrides that behavior.</p>
<p dir="auto">Bazel may still filter sources with these tags. Use <code>bazel build --define gotags=foo,bar</code> to set tags at build time.</p></td>
<td>lies rue on release be false</td>
</tr>
<tr>
<td><code>-exclude pattern</code></td>
<td></td>
</tr>
<tr>
<td><p dir="auto">Prevents Gazelle from processing a file or directory if the given <a href="https://github.com/bmatcuk/doublestar#match">doublestar.Match</a> pattern matches. If the pattern refers to a sou Gazelle won't include it in any rules. If the pattern refers to a d Gazelle won't recurse into it.</p>
<p dir="auto">This option may be repeated. Patterns must be slash-separated, rela repository root. This is equivalent to the ``# gazelle:exclude patt directive.</p></td>
<td><p dir="auto">rce file, irectory,</p>
<p dir="auto">tive to the ern``</p></td>
</tr>
<tr>
<td><code>-external external|static|vendored</code></td>
<td><code>external</code></td>
</tr>
<tr>
<td>Determines how Gazelle resolves import paths that cannot be resolve current repository. May be <code>external</code>, <code>static</code> or :v <a href="#dependency-resolution">Dependency resolution</a>.</td>
<td><blockquote>
<p dir="auto">in the</p>
</blockquote>
alue:<span>vendored</span>. See</td>
</tr>
<tr>
<td><code>-index true|false</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>Determines whether Gazelle should index the libraries in the curren should use the index to resolve dependencies. If this is switched o <code># gazelle:prefix</code> directive or <code>-go_prefix</code> flag to resolve de</td>
<td>t repository and whether it ff, Gazelle would rely on pendencies.</td>
</tr>
<tr>
<td><code>-go_grpc_compiler</code></td>
<td><code>@io_bazel_rules_go//proto:go_grpc</code></td>
</tr>
<tr>
<td><p dir="auto">The protocol buffers compiler to use for building go bindings for g</p>
<p dir="auto">See <a href="https://github.com/bazelbuild/rules_go/blob/master/proto/core.rst#predefined-plugins">Predefined plugins</a> for available options; commonly used opti <code>@io_bazel_rules_go//proto:gofast_grpc</code> and ``@io_bazel_rules_go/</p></td>
<td><p dir="auto">RPC. May be repeated.</p>
<p dir="auto">ons include /proto:gogofaster_grpc``.</p></td>
</tr>
<tr>
<td><code>-go_naming_convention</code></td>
<td></td>
</tr>
<tr>
<td>Controls the names of generated Go targets. Equivalent to the <code># gazelle:go_naming_convention</code> directive. See details in <a href="#directives">Directives</a> below.</td>
<td></td>
</tr>
<tr>
<td><code>-go_naming_convention_external</code></td>
<td></td>
</tr>
<tr>
<td>Controls the default naming convention used when resolving librarie external repositories with unknown naming conventions. Equivalent t <code># gazelle:go_naming_convention_external</code> directive.</td>
<td>s in o the</td>
</tr>
<tr>
<td><code>-go_prefix example.com/repo</code></td>
<td></td>
</tr>
<tr>
<td><p dir="auto">A prefix of import paths for libraries in the repository that corre the repository root. Equivalent to setting the <code># gazelle:prefix</code> in the root BUILD.bazel file or the <code>prefix</code> attribute of the ``g neither of those are set, this option is mandatory.</p>
<p dir="auto">This prefix is used to determine whether an import path refers to a in the current repository or an external dependency.</p></td>
<td><dl>
<dt>sponds to</dt>
<dd><p dir="auto">directive</p>
</dd>
</dl>
<p dir="auto">azelle`` rule. If</p>
<blockquote>
<p dir="auto">library</p>
</blockquote></td>
</tr>
<tr>
<td><code>-go_proto_compiler</code></td>
<td><code>@io_bazel_rules_go//proto:go_proto</code></td>
</tr>
<tr>
<td><p dir="auto">The protocol buffers compiler to use for building go bindings. May</p>
<p dir="auto">See <a href="https://github.com/bazelbuild/rules_go/blob/master/proto/core.rst#predefined-plugins">Predefined plugins</a> for available options; commonly used opti <code>@io_bazel_rules_go//proto:gofast_proto</code> and ``@io_bazel_rules_go</p></td>
<td><p dir="auto">be repeated.</p>
<p dir="auto">ons include //proto:gogofaster_proto``.</p></td>
</tr>
<tr>
<td><code>-known_import example.com</code></td>
<td></td>
</tr>
<tr>
<td><p dir="auto">Skips import path resolution for a known domain. May be repeated.</p>
<p dir="auto">When Gazelle resolves an import path to an external dependency, it to discover the remote repository root over HTTP. Gazelle skips thi discovery step for a few well-known domains with predictable struct golang.org and github.com. This flag specifies additional domains t which is useful in situations where the lookup would fail for some</p></td>
<td>attempts s ure, like o skip, reason.</td>
</tr>
<tr>
<td><code>-mode fix|print|diff</code></td>
<td><code>fix</code></td>
</tr>
<tr>
<td><p dir="auto">Method for emitting merged build files.</p>
<p dir="auto">In <code>fix</code> mode, Gazelle writes generated and merged files to disk. <code>print</code> mode, it prints them to stdout. In <code>diff</code> mode, it prin unified diff.</p></td>
<td><blockquote>
<p dir="auto">In</p>
</blockquote>
ts a</td>
</tr>
<tr>
<td><code>-proto default|file|package|legacy|disable|disable_global</code></td>
<td><code>default</code></td>
</tr>
<tr>
<td>Determines how Gazelle should generate rules for .proto files. See in <a href="#directives">Directives</a> below.</td>
<td>details</td>
</tr>
<tr>
<td><code>-proto_group group</code></td>
<td>:value:<span>""</span></td>
</tr>
<tr>
<td>Determines the proto option Gazelle uses to group .proto files into when in <code>package</code> mode. See details in <a href="#directives">Directives</a> below.</td>
<td>rules</td>
</tr>
<tr>
<td><code>-proto_import_prefix path</code></td>
<td></td>
</tr>
<tr>
<td>Sets the <a href="https://docs.bazel.build/versions/master/be/protocol-buffer.html#proto_library.import_prefix" rel="nofollow">import_prefix</a> attribute of generated <code>proto_library</code> This adds a prefix to the string used to import <code>.proto</code> files li the <code>srcs</code> attribute of generated rules. Equivalent to the <code># gazelle:proto_import_prefix</code> directive. See details in `Direct</td>
<td><p dir="auto">rules. sted in</p>
<p dir="auto">ives`_ below.</p></td>
</tr>
<tr>
<td><code>-repo_root dir</code></td>
<td></td>
</tr>
<tr>
<td><p dir="auto">The root directory of the repository. Gazelle normally infers this directory containing the WORKSPACE file.</p>
<p dir="auto">Gazelle will not process packages outside this directory.</p></td>
<td>to be the</td>
</tr>
<tr>
<td><code>-lang lang1,lang2,...</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><p dir="auto">Selects languages for which to compose and index rules.</p>
<p dir="auto">By default, all languages that this Gazelle was built with are proc</p></td>
<td>essed.</td>
</tr>
<tr>
<td><code>-cpuprofile filename</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><p dir="auto">If specified, gazelle uses [runtime/pprof](<a href="https://pkg.go.dev/runti" rel="nofollow">https://pkg.go.dev/runti</a> CPU profiling information from the command and save it to the given</p>
<p dir="auto">By default, this is disabled</p></td>
<td><dl>
<dt>me/pprof#StartCPUProfile) to collect</dt>
<dd><p dir="auto">file.</p>
</dd>
</dl></td>
</tr>
<tr>
<td><code>-memprofile filename</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><p dir="auto">If specified, gazelle uses [runtime/pprof](<a href="https://pkg.go.dev/runti" rel="nofollow">https://pkg.go.dev/runti</a> memory a profile information from the command and save it to a file</p>
<p dir="auto">By default, this is disabled</p></td>
<td>me/pprof#WriteHeapProfile) to collect .</td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 id="user-content-update-repos" class="heading-element" dir="auto"><code>update-repos</code></h3><a id="user-content-update-repos" class="anchor" aria-label="Permalink: update-repos" href="#update-repos"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>update-repos</code> command updates repository rules. It can write the rules to either the WORKSPACE (by default) or a .bzl file macro function. It can be used to add new repository rules or update existing rules to the specified version. It can also import repository rules from a <code>go.mod</code> or a <code>go.work</code> file.</p>
<p dir="auto">WARNING: This command is mainly used for managing external Go dependencies in Bazel's WORKSPACE mode. For managing external Go dependencies in Bazel's BzlMod mode, please check: <a href="https://github.com/bazelbuild/rules_go/blob/master/docs/go/core/bzlmod.md#external-dependencies">https://github.com/bazelbuild/rules_go/blob/master/docs/go/core/bzlmod.md#external-dependencies</a></p>
<div id="user-content-cb12" dir="auto"><div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Add or update a repository to latest version by import path
$ gazelle update-repos example.com/new/repo

# Add or update a repository to specified version/commit by import path
$ gazelle update-repos example.com/new/repo@v1.3.1

# Import repositories from go.mod
$ gazelle update-repos -from_file=go.mod

# Import repositories from go.work
$ gazelle update-repos -from_file=go.work

# Import repositories from go.mod and update macro
$ gazelle update-repos -from_file=go.mod -to_macro=repositories.bzl%go_repositories

# Import repositories from go.work and update macro
$ gazelle update-repos -from_file=go.work -to_macro=repositories.bzl%go_repositories"><pre><span class="pl-c"><span class="pl-c">#</span> Add or update a repository to latest version by import path</span>
$ gazelle update-repos example.com/new/repo

<span class="pl-c"><span class="pl-c">#</span> Add or update a repository to specified version/commit by import path</span>
$ gazelle update-repos example.com/new/repo@v1.3.1

<span class="pl-c"><span class="pl-c">#</span> Import repositories from go.mod</span>
$ gazelle update-repos -from_file=go.mod

<span class="pl-c"><span class="pl-c">#</span> Import repositories from go.work</span>
$ gazelle update-repos -from_file=go.work

<span class="pl-c"><span class="pl-c">#</span> Import repositories from go.mod and update macro</span>
$ gazelle update-repos -from_file=go.mod -to_macro=repositories.bzl%go_repositories

<span class="pl-c"><span class="pl-c">#</span> Import repositories from go.work and update macro</span>
$ gazelle update-repos -from_file=go.work -to_macro=repositories.bzl%go_repositories</pre></div></div>
<p dir="auto">The following flags are accepted:</p>
<table>




<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Default value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-from_file lock-file</code></td>
<td></td>
</tr>
<tr>
<td><p dir="auto">Import repositories from a file as <a href="repository.md#go_repository">go_repository</a> rules. These rules will be added to the bottom of the</p>
<p dir="auto">The lock file format is inferred from the file name. <code>go.mod</code> and <code>go.work</code> are all supported.</p></td>
<td>WORKSPACE file or merged with existing rules.</td>
</tr>
<tr>
<td><code>-repo_root dir</code></td>
<td></td>
</tr>
<tr>
<td><p dir="auto">The root directory of the repository. Gazelle normally infers this to be the directory containing the WORK</p>
<p dir="auto">Gazelle will not process packages outside this directory.</p></td>
<td>SPACE file.</td>
</tr>
<tr>
<td><code>-to_macro macroFile%defName</code></td>
<td></td>
</tr>
<tr>
<td><p dir="auto">Tells Gazelle to write new repository rules into a .bzl macro function rather than the WORKSPACE file.</p>
<p dir="auto">The <code>repository_macro</code> directive should be added to the WORKSPACE in order for future Gazelle calls to r</p></td>
<td>ecognize the repos defined in the macro file.</td>
</tr>
<tr>
<td><code>-prune true|false</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>When true, Gazelle will remove <a href="repository.md#go_repository">go_repository</a> rules that no longer have equivalent repos in the <code>go.mod  This flag can only be used with</code>-from_file``.</td>
<td>`` file.</td>
</tr>
<tr>
<td><code>-build_directives arg1,arg2,...</code></td>
<td></td>
</tr>
<tr>
<td>Sets the <code>build_directives attribute</code> for the generated <a href="repository.md#go_repository">go_repository</a> rule(s).</td>
<td></td>
</tr>
<tr>
<td><code>-build_external external|vendored</code></td>
<td></td>
</tr>
<tr>
<td>Sets the <code>build_external</code> attribute for the generated <a href="repository.md#go_repository">go_repository</a> rule(s).</td>
<td></td>
</tr>
<tr>
<td><code>-build_extra_args arg1,arg2,...</code></td>
<td></td>
</tr>
<tr>
<td>Sets the <code>build_extra_args attribute</code> for the generated <a href="repository.md#go_repository">go_repository</a> rule(s).</td>
<td></td>
</tr>
<tr>
<td><code>-build_file_generation auto|on|off|clean</code></td>
<td></td>
</tr>
<tr>
<td>Sets the <code>build_file_generation</code> attribute for the generated <a href="repository.md#go_repository">go_repository</a> rule(s).</td>
<td></td>
</tr>
<tr>
<td><code>-build_file_names file1,file2,...</code></td>
<td></td>
</tr>
<tr>
<td>Sets the <code>build_file_name</code> attribute for the generated <a href="repository.md#go_repository">go_repository</a> rule(s).</td>
<td></td>
</tr>
<tr>
<td><code>-build_file_proto_mode default|package|legacy|disable|disable_global</code></td>
<td></td>
</tr>
<tr>
<td>Sets the <code>build_file_proto_mode</code> attribute for the generated <a href="repository.md#go_repository">go_repository</a> rule(s).</td>
<td></td>
</tr>
<tr>
<td><code>-build_tags tag1,tag2,...</code></td>
<td></td>
</tr>
<tr>
<td>Sets the <code>build_tags</code> attribute for the generated <a href="repository.md#go_repository">go_repository</a> rule(s).</td>
<td></td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 id="user-content-directives" class="heading-element" dir="auto">Directives</h3><a id="user-content-directives" class="anchor" aria-label="Permalink: Directives" href="#directives"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Gazelle can be configured with <em>directives</em>, which are written as top-level comments in build files. Most options that can be set on the command line can also be set using directives. Some options can only be set with directives.</p>
<p dir="auto">Directive comments have the form <code># gazelle:key value</code>. For example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_bazel_rules_go//go:def.bzl&quot;, &quot;go_library&quot;)

# gazelle:prefix github.com/example/project
# gazelle:build_file_name BUILD,BUILD.bazel

go_library(
    name = &quot;go_default_library&quot;,
    srcs = [&quot;example.go&quot;],
    importpath = &quot;github.com/example/project&quot;,
    visibility = [&quot;//visibility:public&quot;],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_bazel_rules_go//go:def.bzl"</span>, <span class="pl-s">"go_library"</span>)

<span class="pl-c"># gazelle:prefix github.com/example/project</span>
<span class="pl-c"># gazelle:build_file_name BUILD,BUILD.bazel</span>

<span class="pl-en">go_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"go_default_library"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"example.go"</span>],
    <span class="pl-s1">importpath</span> <span class="pl-c1">=</span> <span class="pl-s">"github.com/example/project"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
)</pre></div>
<p dir="auto">Directives apply in the directory where they are set <em>and</em> in subdirectories. This means, for example, if you set <code># gazelle:prefix</code> in the build file in your project's root directory, it affects your whole project. If you set it in a subdirectory, it only affects rules in that subtree.</p>
<p dir="auto">The following directives are recognized:</p>
<table>




<thead>
<tr>
<th><strong>Directive</strong></th>
<th><strong>Default value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code># gazelle:build_file_name names</code></td>
<td><code>BUILD.bazel,BUILD</code></td>
</tr>
<tr>
<td>Comma-separated list of file names. Gazelle recogni build files. New files will use the first name in t your project contains non-Bazel files named ``BUILD case-insensitive file systems).</td>
<td>zes these files as Bazel his list. Use this if <code>(or</code>build`` on</td>
</tr>
<tr>
<td><code># gazelle:build_tags foo,bar</code></td>
<td>none</td>
</tr>
<tr>
<td><p dir="auto">List of Go build tags Gazelle will consider to be t constraints when generating Go rules. It assumes ce certain platforms (for example, <code>amd64,linux</code>). I tags are true (for example, <code>go1.8</code>). It consider (for example, <code>ignore</code>). This flag overrides that</p>
<p dir="auto">Bazel may still filter sources with these tags. Use <code>bazel build --define gotags=foo,bar</code> to set tags</p></td>
<td><p dir="auto">rue. Gazelle applies rtain tags are true on t assumes all Go release s other tags to be false behavior.</p>
<blockquote>
<p dir="auto">at build time.</p>
</blockquote></td>
</tr>
<tr>
<td><code># gazelle:exclude pattern</code></td>
<td>n/a</td>
</tr>
<tr>
<td>Prevents Gazelle from processing a file or director <a href="https://github.com/bmatcuk/doublestar#match">doublestar.Match</a> pattern matches. If the pattern Gazelle won't include it in any rules. If the patte Gazelle won't recurse into it. This directive may b multiple patterns, one per line.</td>
<td><dl>
<dt>y if the given</dt>
<dd><p dir="auto">refers to a source file,</p>
</dd>
</dl>
rn refers to a directory, e repeated to exclude</td>
</tr>
<tr>
<td><code># gazelle:follow pattern</code></td>
<td>n/a</td>
</tr>
<tr>
<td><p dir="auto">Instructs Gazelle to follow a symbolic link to a di given <a href="https://github.com/bmatcuk/doublestar#match">doublestar.Match</a> pattern matches. Normally links unless they point outside of the repository r</p>
<p dir="auto">Care must be taken to avoid visiting a directory mo The <code># gazelle:exclude</code> directive may be used to recursing into a directory.</p></td>
<td><p dir="auto">rectory within the repository if the , Gazelle does not follow symbolic oot.</p>
<p dir="auto">re than once. prevent Gazelle from</p></td>
</tr>
<tr>
<td><code># gazelle:go_generate_proto</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>Instructs Gazelle's Go extension whether to generat <code>proto_library</code> rules generated by the Proto exte Gazelle will generate <code>go_proto_library</code> and <code>go</code># gazelle:proto<code>. When this directive is</code>false <code>proto_library</code> rules. If there are any pre-gener regular Go files.</td>
<td>e <code>go_proto_library</code> rules for nsion. When this directive is <code>true</code> _library<code>according to</code>, the Go extension will ignore any ated Go files, they will be treated as</td>
</tr>
<tr>
<td><code># gazelle:go_test mode</code></td>
<td><code>default</code></td>
</tr>
<tr>
<td><p dir="auto">Tells Gazelle how to generate rules for _test.go fi</p>
<ul dir="auto">
<li><code>default</code>: One <code>go_test</code> rule will be generat all <code>_test.go</code> files in the directory.</li>
<li><code>file</code>: A distinct <code>go_test</code> rule will be gen package directory.</li>
</ul></td>
<td><p dir="auto">les. Valid values are:</p>
<p dir="auto">ed whose <code>srcs</code> includes</p>
<p dir="auto">erated for each <code>_test.go</code> file in the</p></td>
</tr>
<tr>
<td><code># gazelle:go_grpc_compilers</code></td>
<td><code>@io_bazel_rules_go//proto:go_grpc</code></td>
</tr>
<tr>
<td>The protocol buffers compiler(s) to use for buildin Multiple compilers, separated by commas, may be spe Omit the directive value to reset <code>go_grpc_compile  See `Predefined plugins`_ for available options; co</code>@io_bazel_rules_go//proto:gofast_grpc<code>and</code>@io_bazel_rules_go//proto:gogofaster_grpc``.</td>
<td><p dir="auto">g go bindings for gRPC. cified. rs`` back to the default.</p>
<p dir="auto">mmonly used options include</p></td>
</tr>
<tr>
<td><code># gazelle:go_naming_convention</code></td>
<td>inferred automatically</td>
</tr>
<tr>
<td><p dir="auto">Controls the names of generated Go targets.</p>
<p dir="auto">Valid values are:</p>
<ul dir="auto">
<li><code>go_default_library</code>: Library targets are named are named <code>go_default_test</code>.</li>
<li><code>import</code>: Library and test targets are named af path. For example, <code>example.repo/foo</code> is named <code>foo` Major version suffixes like</code>/v2<code>are dropped. For a main package with a binary</code>foobin<code>, the</code>foobin_test``.</li>
<li><code>import_alias</code>: Same as <code>import</code>, but an <code>al</code>go_default_library`` to ensure backwards compat</li>
</ul>
<p dir="auto">If no naming convention is set, Gazelle attempts to use by reading the root build file and build files subdirectories. If no Go targets are found, Gazelle</p></td>
<td><blockquote>
<p dir="auto"><code>go_default_library</code>, test targets</p>
</blockquote>
<p dir="auto">ter the last segment of their import</p>
<p dir="auto"><span>, and the test target is </span><span>foo_test</span>`.</p>
<p dir="auto">names are instead <code>foobin_lib</code> and</p>
<p dir="auto">ias<code>target is generated named ibility.   infer the convention in in immediate  defaults to</code>import``.</p></td>
</tr>
<tr>
<td><code># gazelle:go_naming_convention_external</code></td>
<td>n/a</td>
</tr>
<tr>
<td>Controls the default naming convention used when re external repositories with unknown naming conventio as <code>go_naming_convention</code>.</td>
<td>solving libraries in ns. Accepts the same values</td>
</tr>
<tr>
<td><code># gazelle:go_proto_compilers</code></td>
<td><code>@io_bazel_rules_go//proto:go_proto</code></td>
</tr>
<tr>
<td>The protocol buffers compiler(s) to use for buildin Multiple compilers, separated by commas, may be spe Omit the directive value to reset <code>go_proto_compil  See `Predefined plugins`_ for available options; co</code>@io_bazel_rules_go//proto:gofast_proto<code>and</code>@io_bazel_rules_go//proto:gogofaster_proto``.</td>
<td><p dir="auto">g go bindings. cified. ers`` back to the default.</p>
<p dir="auto">mmonly used options include</p></td>
</tr>
<tr>
<td><code># gazelle:ignore</code></td>
<td>n/a</td>
</tr>
<tr>
<td>Prevents Gazelle from modifying the build file. Gaz rules in the build file and may modify build files</td>
<td>elle will still read in subdirectories.</td>
</tr>
<tr>
<td><code># gazelle:importmap_prefix path</code></td>
<td>See below</td>
</tr>
<tr>
<td><p dir="auto">A prefix for <code>importmap</code> attributes in library ru an <code>importmap</code> on a <code>go_library</code> or <code>go_proto_ concatenating this with the relative path from the prefix is set to the library. For example, if</code>imp to <code>"x/example.com/repo"</code> in the build file <code>//f then a library in</code>foo/bar/baz<code>will have the</code>i <code>"x/example.com/repo/baz"</code>.</p>
<p dir="auto"><code>importmap</code> is not set when it matches <code>importpa  As a special case, when Gazelle enters a directory sets</code>importmap_prefix<code>to a string based on the location of the vendor directory. If you wish to ov to set</code>importmap_prefix`` explicitly in the vendo</p></td>
<td><p dir="auto">les. Gazelle will set library<code>by directory where the ortmap_prefix</code> is set oo/bar:BUILD.bazel<code>, mportmap</code> of</p>
<p dir="auto">th<code>.  named</code>vendor``, it repository name and the erride this, you'll need r directory.</p></td>
</tr>
<tr>
<td>:direc:`# gazelle:map_kind from_kind to_kind to_kin</td>
<td>d_load` | n/a</td>
</tr>
<tr>
<td><p dir="auto">Customizes the kind of rules generated by Gazelle.</p>
<p dir="auto">As a separate step after generating rules, any new kind replaced with <code>to_kind</code>. This means that <code>t parameters and behave similarly.  Most commonly, this would be used to replace the ru custom macros. For example,</code>gazelle:map_kind go_binary go_deployable //tools/ produce rules of kind <code>go_deployable</code> as loaded f <code>go_binary</code>, for this directory or within.</p>
<p dir="auto">Existing rules of the old kind will be ignored. To kind to a mapped kind, use <a href="https://github.com/bazelbuild/buildtools/tree/master/buildozer">buildozer</a>.</p></td>
<td><p dir="auto">rules of kind <code>from_kind</code> have their o_kind<code>must accept the same   les provided by</code>rules_go<code>with  go:def.bzl</code> would configure Gazelle to rom <code>//tools/go:def.bzl</code> instead of</p>
<p dir="auto">switch your codebase from a builtin</p></td>
</tr>
<tr>
<td><code># gazelle:prefix path</code></td>
<td>n/a</td>
</tr>
<tr>
<td>A prefix for <code>importpath</code> attributes on library r an <code>importpath</code> on a <code>go_library</code> or <code>go_proto concatenating this with the relative path from the prefix is set to the library. Most commonly,</code>pref name of a repository in the root directory of a rep in this repository, <code>prefix</code> is set in <code>//:BUILD</code>github.com/bazelbuild/bazel-gazelle<code>. The</code>go_l <code>//cmd/gazelle</code> is assigned the <code>importpath</code> <code>"github.com/bazelbuild/bazel-gazelle/cmd/gazelle"  As a special case, when Gazelle enters a directory</code>prefix<code>to the empty string. This automatically an intuitive</code>importpath``.</td>
<td><p dir="auto">ules. Gazelle will set _library<code>by directory where the ix</code> is set to the ository. For example, .bazel<code>to ibrary</code> in</p>
<p dir="auto"><code>.  named</code>vendor``, it sets gives vendored libraries</p></td>
</tr>
<tr>
<td><code># gazelle:proto mode</code></td>
<td><code>default</code></td>
</tr>
<tr>
<td><p dir="auto">Tells Gazelle how to generate rules for .proto file</p>
<ul dir="auto">
<li><code>default</code>: <code>proto_library</code>, <code>go_proto_librar rules are generated using</code>@io_bazel_rules_go//p of each rule may be generated per directory. This</li>
<li><code>file</code>: a <code>proto_library</code> rule is generated f</li>
<li><code>package</code>: multiple <code>proto_library</code> and ``<a href="">go</a> may be generated in the same directory. .proto fi rules based on their package name or another opti</li>
<li><code>legacy</code>: <code>filegroup</code> rules are generated for <code>@io_bazel_rules_go//proto:go_proto_library.bzl` rules must be written by hand. Gazelle will run i if</code>go_proto_library.bzl`` is loaded to avoid di projects, but this can be overridden with a direc</li>
<li><code>disable</code>: .proto files are ignored. Gazelle wi automatically if <code>go_proto_library</code> is loaded f but this can be overridden with a directive.</li>
<li><code>disable_global</code>: like <code>disable</code> mode, but al using any special cases in dependency resolution Google APIs. Useful for avoiding build-time depen</li>
</ul>
<p dir="auto">This directive applies to the current directory and special case, when Gazelle enters a directory named mode isn't set explicitly in a parent directory or Gazelle will run in <code>disable</code> mode. Additionally, <code>@io_bazel_rules_go//proto:go_proto_library.bzl</code> will run in <code>legacy</code> mode.</p></td>
<td><ol start="19" type="a" dir="auto">
<li>Valid values are:</li>
</ol>
<dl>
<dt>y<code>, and</code>go_library<code>roto:def.bzl</code>. Only one</dt>
<dd><p dir="auto">is the default mode.</p>
</dd>
</dl>
or every .proto file. proto_library<code>rules les are grouped into on (see</code>proto_group<code>).  use by `.</code>go_proto_library<code>n this mode automatically srupting existing tive. ll run in this mode rom any other source,  so prevents Gazelle from for Well Known Types and dencies on protoc.   subdirectories. As a</code>vendor``, if the proto on the command line, if the file is loaded, Gazelle</td>
</tr>
<tr>
<td><code># gazelle:proto_group option</code></td>
<td><code>""</code></td>
</tr>
<tr>
<td><p dir="auto"><em>This directive is only effective in</em> <code>package</code> *</p>
<p dir="auto">Specifies an option that Gazelle can use to group . For example, when set to <code>go_package</code>, .proto fil <code>option go_package</code> will be grouped together.</p>
<p dir="auto">When this directive is set to the empty string, Gaz by their proto package statement.</p>
<p dir="auto">Rule names are generated based on the last run of i in the package name. For example, if the package is <code>proto_library</code> rule will be named <code>baz_proto</code>.</p></td>
<td><p dir="auto">mode (see above).*</p>
<p dir="auto">proto files into rules. es with the same</p>
<p dir="auto">elle will group packages</p>
<dl>
<dt>dentifier characters</dt>
<dd><p dir="auto"><code>"foo/bar/baz"</code>, the</p>
</dd>
</dl></td>
</tr>
<tr>
<td><code># gazelle:proto_import_prefix path</code></td>
<td>n/a</td>
</tr>
<tr>
<td><p dir="auto">Sets the <a href="https://docs.bazel.build/versions/master/be/protocol-buffer.html#proto_library.import_prefix" rel="nofollow">import_prefix</a> attribute of generated <code>This adds a prefix to the string used to import</code>. the <code>srcs</code> attribute of generated rules.</p>
<p dir="auto">For example, if the target <code>//a:b_proto</code> has <code>sr</code>import_prefix = "github.com/x/y"<code>, then</code>b.prot with the string <code>"github.com/x/y/a/b.proto"</code>.</p></td>
<td><p dir="auto">proto_library<code>rules. proto</code> files listed in</p>
<p dir="auto">cs = ["b.proto"]<code>and o</code> should be imported</p></td>
</tr>
<tr>
<td><code># gazelle:proto_strip_import_prefix path</code></td>
<td>n/a</td>
</tr>
<tr>
<td><p dir="auto">Sets the <a href="https://docs.bazel.build/versions/master/be/protocol-buffer.html#proto_library.strip_import_prefix" rel="nofollow">strip_import_prefix</a> attribute of genera This is a prefix to strip from the strings used to</p>
<p dir="auto">If the prefix starts with a slash, it's intepreted root. Otherwise, it's relative to the directory con The package-relative form is only useful when a sin <code>.proto</code> files in subdirectories. Gazelle doesn't this, so only paths with a leading slash should be a warning when the package-relative form is used.</p>
<p dir="auto">For example, if the target <code>//proto/a:b_proto</code> ha and <code>strip_import_prefix = "/proto"</code>, then <code>b.pr with the string</code>"a/b.proto"``.</p></td>
<td><p dir="auto">ted <code>proto_library</code> rules. import <code>.proto</code> files.</p>
<p dir="auto">relative to the repository taining the build file. gle build file covers generate build files like used. Gazelle will print</p>
<p dir="auto">s <code>srcs = ["b.proto"]</code> oto`` should be imported</p></td>
</tr>
<tr>
<td><code># gazelle:resolve ...</code></td>
<td>n/a</td>
</tr>
<tr>
<td><p dir="auto">Specifies an explicit mapping from an import string <a href="#dependency-resolution">Dependency resolution</a>. The format for a resolve</p>
<dl>
<dt><code># gazelle:resolve source-lang import-lang import-  *</code>source-lang<code>is the language of the source cod *</code>import-lang<code>is the language importing the lib   the same as</code>source-lang<code>but may differ with g   example, when resolving dependencies for a</code>go_p</dt>
<dd><p dir="auto"><code>source-lang</code> would be <code>"proto"</code> and <code>import</code>import-lang`` may be omitted if it is the same</p>
</dd>
</dl>
<ul dir="auto">
<li><code>import-string</code> is the string used in source co</li>
<li><code>label</code> is the Bazel label that Gazelle should</li>
</ul>
<p dir="auto">For example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# gazelle:resolve go example.com/foo //foo:go_def
# gazelle:resolve proto go foo/foo.proto //foo:fo"><pre><span class="pl-c"># gazelle:resolve go example.com/foo //foo:go_def</span>
<span class="pl-c"># gazelle:resolve proto go foo/foo.proto //foo:fo</span></pre></div></td>
<td><blockquote>
<p dir="auto">to a label for</p>
</blockquote>
<p dir="auto">directive is:</p>
<p dir="auto">string label<code>e being imported. rary. This is usually enerated code. For roto_library</code>, -lang<code>would be</code>"go"<code>. as</code>source-lang<code>. de to import a library. write in</code>deps``.</p>
<p dir="auto">ault_library o_go_proto</p></td>
</tr>
<tr>
<td><code># gazelle:resolve_regexp ...</code></td>
<td>n/a</td>
</tr>
<tr>
<td><p dir="auto">Specifies an explicit mapping from an import regex <a href="#dependency-resolution">Dependency resolution</a>. The format for a resolve</p>
<dl>
<dt><code># gazelle:resolve_regexp source-lang import-lang  *</code>source-lang<code>is the language of the source cod *</code>import-lang<code>is the language importing the lib   the same as</code>source-lang<code>but may differ with g   example, when resolving dependencies for a</code>go_p</dt>
<dd><p dir="auto"><code>source-lang</code> would be <code>"proto"</code> and <code>import</code>import-lang`` may be omitted if it is the same</p>
</dd>
<dt>* <code>import-string-regex</code> is the regex applied to t</dt>
<dd><p dir="auto">If it matches, that import will be resolved to th</p>
</dd>
</dl>
<ul dir="auto">
<li><code>label</code> is the Bazel label that Gazelle should</li>
</ul>
<p dir="auto">For example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# gazelle:resolve_regexp go example.com/.* //foo:
# gazelle:resolve_regexp proto go foo/.*\.proto /"><pre><span class="pl-c"># gazelle:resolve_regexp go example.com/.* //foo:</span>
<span class="pl-c"># gazelle:resolve_regexp proto go foo/.*\.proto /</span></pre></div></td>
<td><p dir="auto">to a label for directive is:</p>
<p dir="auto">import-string-regex label<code>e being imported. rary. This is usually enerated code. For roto_library</code>, -lang<code>would be</code>"go"<code>. as</code>source-lang<code>. he import in the source code. e label specified below. write in</code>deps``.</p>
<p dir="auto">go_default_library /foo:foo_go_proto</p></td>
</tr>
<tr>
<td><code># gazelle:go_visibility label</code></td>
<td>n/a</td>
</tr>
<tr>
<td>By default, internal packages are only visible to i internal packages should be visible to additionally times, adding a list of labels.</td>
<td>ts siblings. This directive adds a label . This directive can be used several</td>
</tr>
<tr>
<td><code># gazelle:lang lang1,lang2,...</code></td>
<td>n/a</td>
</tr>
<tr>
<td>Sets the language selection flag for this and desce index and generate rules for only the languages nam</td>
<td>ndent packages, which causes gazelle to ed in this directive.</td>
</tr>
<tr>
<td><code># gazelle:default_visibility visibility</code></td>
<td>n/a</td>
</tr>
<tr>
<td><p dir="auto">Comma-separated list of visibility specifications. This directive adds the visibility specifications f</p>
<p dir="auto">For example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# gazelle:default_visibility //foo:__subpackages_"><pre><span class="pl-c"># gazelle:default_visibility //foo:__subpackages_</span></pre></div></td>
<td><p dir="auto">or this and descendant packages.</p>
<p dir="auto">_,//src:__subpackages__</p></td>
</tr>
</tbody>
</table>
<p dir="auto">Gazelle also reads directives from the WORKSPACE file. They may be used to discover custom repository names and known prefixes. The <code>fix</code> and <code>update</code> commands use these directives for dependency resolution. <code>update-repos</code> uses them to learn about repository rules defined in alternate locations.</p>
<table>




<thead>
<tr>
<th><strong>WORKSPACE Directive</strong></th>
<th><strong>Default value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code># gazelle:repository_macro [+]macroFile%defName</code></td>
<td>n/a</td>
</tr>
<tr>
<td><p dir="auto">Tells Gazelle to look for repository rules in a macro in a .bzl file repeated multiple times. The macro can be generated by calling <code>update-repos</code> with the ``to</p>
<p dir="auto">The directive can be prepended with a "+", which will tell Gazelle t within any macros called by the specified macro.</p></td>
<td><p dir="auto">. The directive can be</p>
<p dir="auto">_macro`` flag.</p>
<p dir="auto">o also look for repositories</p></td>
</tr>
<tr>
<td><code># gazelle:repository rule_kind attr1_name=attr1_value ...</code></td>
<td>n/a</td>
</tr>
<tr>
<td><p dir="auto">Specifies a repository rule that Gazelle should know about. The dire and can be declared from within a macro definition that Gazelle know directive must define a rule kind and a name attribute, but it can d</p>
<p dir="auto">This is useful for teaching Gazelle about repos declared in external to override an actual repository rule. For example, a <code>git_reposito could be overriden with the directive:  .. code:: bzl    # gazelle:repository go_repository name=org_golang_x_tools importp  Gazelle would then proceed as if</code>org_golang_x_tools`` was declared</p></td>
<td><p dir="auto">ctive can be repeated multiple times, s about. At the very least the efine extra attributes after that.</p>
<blockquote>
<p dir="auto">macros. The directive can also be used</p>
</blockquote>
<p dir="auto">ry<code>rule for</code>org_golang_x_tools<code>ath=golang.org/x/tools   as a</code>go_repository`` rule.</p></td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 id="user-content-keep-comments" class="heading-element" dir="auto">Keep comments</h3><a id="user-content-keep-comments" class="anchor" aria-label="Permalink: Keep comments" href="#keep-comments"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In addition to directives, Gazelle supports <code># keep</code> comments that protect parts of build files from being modified. <code># keep</code> may be written before a rule, before an attribute, or after a string within a list.</p>
<p dir="auto"><code># keep</code> comments might take one of 2 forms; the <code># keep</code> literal or a description prefixed by <code># keep:</code>.</p>
<div class="markdown-heading" dir="auto"><h4 id="user-content-example" class="heading-element" dir="auto">Example</h4><a id="user-content-example" class="anchor" aria-label="Permalink: Example" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Suppose you have a library that includes a generated .go file. Gazelle won't know what imports to resolve, so you may need to add dependencies manually with <code># keep</code> comments.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_bazel_rules_go//go:def.bzl&quot;, &quot;go_library&quot;)
load(&quot;@com_github_example_gen//:gen.bzl&quot;, &quot;gen_go_file&quot;)

gen_go_file(
    name = &quot;magic&quot;,
    srcs = [&quot;magic.go.in&quot;],
    outs = [&quot;magic.go&quot;],
)

go_library(
    name = &quot;go_default_library&quot;,
    srcs = [&quot;magic.go&quot;],
    visibility = [&quot;//visibility:public&quot;],
    deps = [
        &quot;@com_github_example_gen//:go_default_library&quot;,  # keep
        &quot;@com_github_example_gen//a/b/c:go_default_library&quot;,  # keep: this is also important
    ],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_bazel_rules_go//go:def.bzl"</span>, <span class="pl-s">"go_library"</span>)
<span class="pl-en">load</span>(<span class="pl-s">"@com_github_example_gen//:gen.bzl"</span>, <span class="pl-s">"gen_go_file"</span>)

<span class="pl-en">gen_go_file</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"magic"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"magic.go.in"</span>],
    <span class="pl-s1">outs</span> <span class="pl-c1">=</span> [<span class="pl-s">"magic.go"</span>],
)

<span class="pl-en">go_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"go_default_library"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"magic.go"</span>],
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"@com_github_example_gen//:go_default_library"</span>,  <span class="pl-c"># keep</span>
        <span class="pl-s">"@com_github_example_gen//a/b/c:go_default_library"</span>,  <span class="pl-c"># keep: this is also important</span>
    ],
)</pre></div>
<div class="markdown-heading" dir="auto"><h2 id="user-content-dependency-resolution" class="heading-element" dir="auto">Dependency resolution</h2><a id="user-content-dependency-resolution" class="anchor" aria-label="Permalink: Dependency resolution" href="#dependency-resolution"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">One of Gazelle's most important jobs is resolving library import strings (like <code>import "golang.org/x/sys/unix"</code>) to Bazel labels (like <code>@org_golang_x_sys//unix:go_default_library</code>). Gazelle follows the rules below to resolve dependencies:</p>
<ol type="1" dir="auto">
<li>If the import to be resolved is part of a standard library, no explicit dependency is written. For example, in Go, you don't need to declare that you depend on <code>"fmt"</code>.</li>
<li>If a <code># gazelle:resolve</code> directive matches the import to be resolved, the label at the end of the directive will be used.</li>
<li>If proto rule generation is enabled, special rules will be used when importing certain libraries. These rules may be disabled by adding <code># gazelle:proto disable_global</code> to a build file (this will affect subdirectories, too) or by passing <code>-proto disable_global</code> on the command line.
<ol type="a" dir="auto">
<li>Imports of Well Known Types are mapped to rules in <code>@io_bazel_rules_go//proto/wkt</code>.</li>
<li>Imports of Google APIs are mapped to <code>@go_googleapis</code>.</li>
<li>Imports of <code>github.com/golang/protobuf/ptypes</code>, <code>descriptor</code>, and <code>jsonpb</code> are mapped to special rules in <code>@com_github_golang_protobuf</code>. See <a href="https://github.com/bazelbuild/rules_go/blob/master/proto/core.rst#avoiding-conflicts">Avoiding conflicts with proto rules</a>.</li>
</ol></li>
<li>If the import to be resolved is in the library index, the import will be resolved to that library. If <code>-index=true</code>, Gazelle builds an index of library rules in the current repository before starting dependency resolution, and this is how most dependencies are resolved.
<ol type="a" dir="auto">
<li>For Go, the match is based on the <code>importpath</code> attribute.</li>
<li>For proto, the match is based on the <code>srcs</code> attribute.</li>
</ol></li>
<li>If <code>-index=false</code> and a package is imported that has the current <code>go_prefix</code> as a prefix, Gazelle generates a label following a convention. For example, if the build file in <code>//src</code> set the prefix with <code># gazelle:prefix example.com/repo/foo</code>, and you import the library <code>"example.com/repo/foo/bar</code>, the dependency will be <code>"//src/foo/bar:go_default_library"</code>.</li>
<li>Otherwise, Gazelle will use the current <code>external</code> mode to resolve the dependency.
<ol type="a" dir="auto">
<li>In <code>external</code> mode (the default), Gazelle will transform the import string into an external repository label. For example, <code>"golang.org/x/sys/unix"</code> would be resolved to <code>"@org_golang_x_sys//unix:go_default_library"</code>. Gazelle does not confirm whether the external repository is actually declared in WORKSPACE, but if there <em>is</em> a <code>go_repository</code> in WORKSPACE with a matching <code>importpath</code>, Gazelle will use its name. Gazelle does not index rules in external repositories, so it's possible the resolved dependency does not exist.</li>
<li>In <code>static</code> mode, Gazelle has the same behavior as <code>external</code> mode, except that it will not call out to the network for resolution when no matching import is found within WORKSPACE. Instead, it will skip the unknown import. This is the default mode for <code>go_repository</code> rules.</li>
<li>In <code>vendored</code> mode, Gazelle will transform the import string into a label in the vendor directory. For example, <code>"golang.org/x/sys/unix"</code> would be resolved to <code>"//vendor/golang.org/x/sys/unix:go_default_library"</code>. This mode is usually not necessary, since vendored libraries will be indexed and resolved using rule 4.</li>
</ol></li>
</ol>
<div class="markdown-heading" dir="auto"><h2 id="user-content-fix-command-transformations" class="heading-element" dir="auto">Fix command transformations</h2><a id="user-content-fix-command-transformations" class="anchor" aria-label="Permalink: Fix command transformations" href="#fix-command-transformations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Gazelle will generate and update build files when invoked with either <code>gazelle update</code> or <code>gazelle fix</code> (<code>update</code> is the default). Both commands perform several transformations to fix deprecated usage of the Go rules. <code>update</code> performs a safe set of tranformations, while <code>fix</code> performs some additional transformations that may delete or rename rules.</p>
<p dir="auto">The following transformations are performed:</p>
<p dir="auto"><strong>Migrate library to embed (fix and update):</strong> Gazelle replaces <code>library</code> attributes with <code>embed</code> attributes.</p>
<p dir="auto"><strong>Migrate gRPC compilers (fix and update):</strong> Gazelle converts <code>go_grpc_library</code> rules to <code>go_proto_library</code> rules with <code>compilers = ["@io_bazel_rules_go//proto:go_grpc"]</code>.</p>
<p dir="auto"><strong>Flatten srcs (fix and update):</strong> Gazelle converts <code>srcs</code> attributes that use OS and architecture-specific <code>select</code> expressions to flat lists. rules_go filters these sources anyway.</p>
<p dir="auto"><strong>Squash cgo libraries (fix only)</strong>: Gazelle will remove <span>cgo_library</span> rules named <code>cgo_default_library</code> and merge their attributes with a <code>go_library</code> rule in the same package named <code>go_default_library</code>. If no such <code>go_library</code> rule exists, a new one will be created. Other <code>cgo_library</code> rules will not be removed.</p>
<p dir="auto"><strong>Squash external tests (fix only)</strong>: Gazelle will squash <code>go_test</code> rules named <code>go_default_xtest</code> into <code>go_default_test</code>. Earlier versions of rules_go required internal and external tests to be built separately, but this is no longer needed.</p>
<p dir="auto"><strong>Remove legacy protos (fix only)</strong>: Gazelle will remove usage of <code>go_proto_library</code> rules loaded from <code>@io_bazel_rules_go//proto:go_proto_library.bzl</code> and <code>filegroup</code> rules named <code>go_default_library_protos</code>. Newly generated proto rules will take their place. Since <code>filegroup</code> isn't needed anymore and <code>go_proto_library</code> has different attributes and was always written by hand, Gazelle will not attempt to merge anything from these rules with the newly generated rules.</p>
<p dir="auto">This transformation is only applied in the default proto mode. Since Gazelle will run in legacy proto mode if <code>go_proto_library.bzl</code> is loaded, this transformation is not usually applied. You can set the proto mode explicitly using the directive <code># gazelle:proto default</code>.</p>
<p dir="auto"><strong>Update loads of gazelle rule (fix and update)</strong>: Gazelle will remove loads of <code>gazelle</code> from <code>@io_bazel_rules_go//go:def.bzl</code>. It will automatically add a load from <code>@bazel_gazelle//:def.bzl</code> if <code>gazelle</code> is not loaded from another location.</p>
</article></div>