<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text">

<p align="center" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/onnx/onnx/raw/main/docs/onnx-horizontal-color.png"><img width="40%" src="https://github.com/onnx/onnx/raw/main/docs/onnx-horizontal-color.png" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://pypi.org/project/onnx" rel="nofollow"><img src="https://camo.githubusercontent.com/b51c2f0d80f4498cf3189a38bf3ae0e1fe521289d780986e73d9a80f9565951d/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6f6e6e782e737667" alt="PyPI - Version" data-canonical-src="https://img.shields.io/pypi/v/onnx.svg" style="max-width: 100%;"></a>
<a href="https://dev.azure.com/onnx-pipelines/onnx/_build/latest?definitionId=5&amp;branchName=main" rel="nofollow"><img src="https://camo.githubusercontent.com/a8eda053d8425fa8aee388151d3b8fb12c39ed8c3c63045feeeb070d0753417b/68747470733a2f2f6465762e617a7572652e636f6d2f6f6e6e782d706970656c696e65732f6f6e6e782f5f617069732f6275696c642f7374617475732f57696e646f77732d43493f6272616e63684e616d653d6d61696e266c6162656c3d57696e646f7773" alt="Build Status" data-canonical-src="https://dev.azure.com/onnx-pipelines/onnx/_apis/build/status/Windows-CI?branchName=main&amp;label=Windows" style="max-width: 100%;"></a>
<a href="https://dev.azure.com/onnx-pipelines/onnx/_build/latest?definitionId=7&amp;branchName=main" rel="nofollow"><img src="https://camo.githubusercontent.com/d153cfcdbe57ecf9d6c100eb783bf8ff618812c0a14df73e29e1f3c3495d5585/68747470733a2f2f6465762e617a7572652e636f6d2f6f6e6e782d706970656c696e65732f6f6e6e782f5f617069732f6275696c642f7374617475732f4c696e75782d43493f6272616e63684e616d653d6d61696e266c6162656c3d4c696e7578" alt="Build Status" data-canonical-src="https://dev.azure.com/onnx-pipelines/onnx/_apis/build/status/Linux-CI?branchName=main&amp;label=Linux" style="max-width: 100%;"></a>
<a href="https://dev.azure.com/onnx-pipelines/onnx/_build/latest?definitionId=6&amp;branchName=main" rel="nofollow"><img src="https://camo.githubusercontent.com/7b8a70a12ffbeaa7db08a3a22453bf27dfa44fdb605b80dc850269ea0a87f6c7/68747470733a2f2f6465762e617a7572652e636f6d2f6f6e6e782d706970656c696e65732f6f6e6e782f5f617069732f6275696c642f7374617475732f4d61634f532d43493f6272616e63684e616d653d6d61696e266c6162656c3d4d61634f53" alt="Build Status" data-canonical-src="https://dev.azure.com/onnx-pipelines/onnx/_apis/build/status/MacOS-CI?branchName=main&amp;label=MacOS" style="max-width: 100%;"></a>
<a href="https://bestpractices.coreinfrastructure.org/projects/3313" rel="nofollow"><img src="https://camo.githubusercontent.com/83dc84812a713aa77a014efd501b382fffa4f94a9635e51391747b65ab6a465a/68747470733a2f2f626573747072616374696365732e636f7265696e6672617374727563747572652e6f72672f70726f6a656374732f333331332f6261646765" alt="CII Best Practices" data-canonical-src="https://bestpractices.coreinfrastructure.org/projects/3313/badge" style="max-width: 100%;"></a>
<a href="https://api.securityscorecards.dev/projects/github.com/onnx/onnx" rel="nofollow"><img src="https://camo.githubusercontent.com/d4641a1375800ccdd702e8874a696ba6257f001eca2808ec43c91a7dd3c1f34e/68747470733a2f2f6170692e736563757269747973636f726563617264732e6465762f70726f6a656374732f6769746875622e636f6d2f6f6e6e782f6f6e6e782f6261646765" alt="OpenSSF Scorecard" data-canonical-src="https://api.securityscorecards.dev/projects/github.com/onnx/onnx/badge" style="max-width: 100%;"></a>
<a href="https://api.reuse.software/info/github.com/onnx/onnx" rel="nofollow"><img src="https://camo.githubusercontent.com/feafa0e561dff786b57cc3bad76691b81a98609f6779da42320d4d2195fbf445/68747470733a2f2f6170692e72657573652e736f6674776172652f62616467652f6769746875622e636f6d2f6f6e6e782f6f6e6e78" alt="REUSE compliant" data-canonical-src="https://api.reuse.software/badge/github.com/onnx/onnx" style="max-width: 100%;"></a>
<a href="https://github.com/astral-sh/ruff"><img src="https://camo.githubusercontent.com/18c26428c337f9d641fa09b629a3a03b514e8ac84b57974a0ed7d1b38e14e060/68747470733a2f2f696d672e736869656c64732e696f2f656e64706f696e743f75726c3d68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f61737472616c2d73682f727566662f6d61696e2f6173736574732f62616467652f76322e6a736f6e" alt="Ruff" data-canonical-src="https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json" style="max-width: 100%;"></a>
<a href="https://github.com/psf/black"><img src="https://camo.githubusercontent.com/7d770c433d6198d89f8c1e2f187b904a9721d176259d0e97157337741cc8e837/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667" alt="Black" data-canonical-src="https://img.shields.io/badge/code%20style-black-000000.svg" style="max-width: 100%;"></a></p>
<p dir="auto"><a href="https://onnx.ai" rel="nofollow">Open Neural Network Exchange (ONNX)</a> is an open ecosystem that empowers AI developers
to choose the right tools as their project evolves. ONNX provides an open source format for AI models, both deep learning and traditional ML. It defines an extensible computation graph model, as well as definitions of built-in operators and standard
data types. Currently we focus on the capabilities needed for inferencing (scoring).</p>
<p dir="auto">ONNX is <a href="http://onnx.ai/supported-tools" rel="nofollow">widely supported</a> and can be found in many frameworks, tools, and hardware. Enabling interoperability between different frameworks and streamlining the path from research to production helps increase the speed of innovation in the AI community. We invite the community to join us and further evolve ONNX.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Use ONNX</h1><a id="user-content-use-onnx" class="anchor-element" aria-label="Permalink: Use ONNX" href="#use-onnx"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://onnx.ai/onnx/" rel="nofollow">Documentation of ONNX Python Package</a></li>
<li><a href="https://github.com/onnx/tutorials">Tutorials for creating ONNX models</a></li>
<li><a href="https://github.com/onnx/models">Pre-trained ONNX models</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Learn about the ONNX spec</h1><a id="user-content-learn-about-the-onnx-spec" class="anchor-element" aria-label="Permalink: Learn about the ONNX spec" href="#learn-about-the-onnx-spec"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/onnx/onnx/blob/main/docs/Overview.md">Overview</a></li>
<li><a href="https://github.com/onnx/onnx/blob/main/docs/IR.md">ONNX intermediate representation spec</a></li>
<li><a href="https://github.com/onnx/onnx/blob/main/docs/Versioning.md">Versioning principles of the spec</a></li>
<li><a href="https://github.com/onnx/onnx/blob/main/docs/Operators.md">Operators documentation</a></li>
<li><a href="https://onnx.ai/onnx/operators/index.html" rel="nofollow">Operators documentation</a> (latest release)</li>
<li><a href="https://github.com/onnx/onnx/blob/main/docs/PythonAPIOverview.md">Python API Overview</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Programming utilities for working with ONNX Graphs</h1><a id="user-content-programming-utilities-for-working-with-onnx-graphs" class="anchor-element" aria-label="Permalink: Programming utilities for working with ONNX Graphs" href="#programming-utilities-for-working-with-onnx-graphs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/onnx/onnx/blob/main/docs/ShapeInference.md">Shape and Type Inference</a></li>
<li><a href="https://github.com/onnx/optimizer">Graph Optimization</a></li>
<li><a href="https://github.com/onnx/onnx/blob/main/docs/docsgen/source/api/version_converter.md">Opset Version Conversion</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Contribute</h1><a id="user-content-contribute" class="anchor-element" aria-label="Permalink: Contribute" href="#contribute"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">ONNX is a community project and the open governance model is described <a href="https://github.com/onnx/onnx/blob/main/community/readme.md">here</a>. We encourage you to join the effort and contribute feedback, ideas, and code. You can participate in the <a href="https://github.com/onnx/onnx/blob/main/community/sigs.md">Special Interest Groups</a> and <a href="https://github.com/onnx/onnx/blob/main/community/working-groups.md">Working Groups</a> to shape the future of ONNX.</p>
<p dir="auto">Check out our <a href="https://github.com/onnx/onnx/blob/main/CONTRIBUTING.md">contribution guide</a> to get started.</p>
<p dir="auto">If you think some operator should be added to ONNX specification, please read
<a href="https://github.com/onnx/onnx/blob/main/docs/AddNewOp.md">this document</a>.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Community meetings</h1><a id="user-content-community-meetings" class="anchor-element" aria-label="Permalink: Community meetings" href="#community-meetings"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The schedules of the regular meetings of the Steering Committee, the working groups and the SIGs can be found <a href="https://onnx.ai/calendar" rel="nofollow">here</a></p>
<p dir="auto">Community Meetups are held at least once a year. Content from previous community meetups are at:</p>
<ul dir="auto">
<li>2020.04.09 <a href="https://wiki.lfaidata.foundation/display/DL/LF+AI+Day+-ONNX+Community+Virtual+Meetup+-+Silicon+Valley+-+April+9" rel="nofollow">https://wiki.lfaidata.foundation/display/DL/LF+AI+Day+-ONNX+Community+Virtual+Meetup+-+Silicon+Valley+-+April+9</a></li>
<li>2020.10.14 <a href="https://wiki.lfaidata.foundation/display/DL/LF+AI+Day+-+ONNX+Community+Workshop+-+October+14" rel="nofollow">https://wiki.lfaidata.foundation/display/DL/LF+AI+Day+-+ONNX+Community+Workshop+-+October+14</a></li>
<li>2021.03.24 <a href="https://wiki.lfaidata.foundation/pages/viewpage.action?pageId=35160391" rel="nofollow">https://wiki.lfaidata.foundation/pages/viewpage.action?pageId=35160391</a></li>
<li>2021.10.21 <a href="https://wiki.lfaidata.foundation/pages/viewpage.action?pageId=46989689" rel="nofollow">https://wiki.lfaidata.foundation/pages/viewpage.action?pageId=46989689</a></li>
<li>2022.06.24 <a href="https://wiki.lfaidata.foundation/display/DL/ONNX+Community+Day+-+June+24" rel="nofollow">https://wiki.lfaidata.foundation/display/DL/ONNX+Community+Day+-+June+24</a></li>
<li>2023.06.28 <a href="https://wiki.lfaidata.foundation/display/DL/ONNX+Community+Day+2023+-+June+28" rel="nofollow">https://wiki.lfaidata.foundation/display/DL/ONNX+Community+Day+2023+-+June+28</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Discuss</h1><a id="user-content-discuss" class="anchor-element" aria-label="Permalink: Discuss" href="#discuss"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We encourage you to open <a href="https://github.com/onnx/onnx/issues">Issues</a>, or use <a href="https://lfaifoundation.slack.com/" rel="nofollow">Slack</a> (If you have not joined yet, please use this <a href="https://join.slack.com/t/lfaifoundation/shared_invite/zt-o65errpw-gMTbwNr7FnNbVXNVFkmyNA" rel="nofollow">link</a> to join the group) for more real-time discussion.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Follow Us</h1><a id="user-content-follow-us" class="anchor-element" aria-label="Permalink: Follow Us" href="#follow-us"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Stay up to date with the latest ONNX news. [<a href="https://www.facebook.com/onnxai/" rel="nofollow">Facebook</a>] [<a href="https://twitter.com/onnxai" rel="nofollow">Twitter</a>]</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Roadmap</h1><a id="user-content-roadmap" class="anchor-element" aria-label="Permalink: Roadmap" href="#roadmap"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A roadmap process takes place every year. More details can be found <a href="https://github.com/onnx/steering-committee/tree/main/roadmap">here</a></p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Installation</h1><a id="user-content-installation" class="anchor-element" aria-label="Permalink: Installation" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Official Python packages</h2><a id="user-content-official-python-packages" class="anchor-element" aria-label="Permalink: Official Python packages" href="#official-python-packages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">ONNX released packages are published in PyPi.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pip install onnx  # or pip install onnx[reference] for optional reference implementation dependencies"><pre>pip install onnx  <span class="pl-c"><span class="pl-c">#</span> or pip install onnx[reference] for optional reference implementation dependencies</span></pre></div>
<p dir="auto"><a href="https://pypi.org/project/onnx-weekly/" rel="nofollow">ONNX weekly packages</a> are published in PyPI to enable experimentation and early testing.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">vcpkg packages</h2><a id="user-content-vcpkg-packages" class="anchor-element" aria-label="Permalink: vcpkg packages" href="#vcpkg-packages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">onnx is in the maintenance list of <a href="https://github.com/microsoft/vcpkg">vcpkg</a>, you can easily use vcpkg to build and install it.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.bat # For powershell
./bootstrap-vcpkg.sh # For bash
./vcpkg install onnx"><pre>git clone https://github.com/microsoft/vcpkg.git
<span class="pl-c1">cd</span> vcpkg
./bootstrap-vcpkg.bat <span class="pl-c"><span class="pl-c">#</span> For powershell</span>
./bootstrap-vcpkg.sh <span class="pl-c"><span class="pl-c">#</span> For bash</span>
./vcpkg install onnx</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Conda packages</h2><a id="user-content-conda-packages" class="anchor-element" aria-label="Permalink: Conda packages" href="#conda-packages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A binary build of ONNX is available from <a href="https://conda.io" rel="nofollow">Conda</a>, in <a href="https://conda-forge.org/" rel="nofollow">conda-forge</a>:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="conda install -c conda-forge onnx"><pre>conda install -c conda-forge onnx</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Build ONNX from Source</h2><a id="user-content-build-onnx-from-source" class="anchor-element" aria-label="Permalink: Build ONNX from Source" href="#build-onnx-from-source"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Before building from source uninstall any existing versions of onnx <code>pip uninstall onnx</code>.</p>
<p dir="auto">c++17 or higher C++ compiler version is required to build ONNX from source. Still, users can specify their own <code>CMAKE_CXX_STANDARD</code> version for building ONNX.</p>
<p dir="auto">If you don't have protobuf installed, ONNX will internally download and build protobuf for ONNX build.</p>
<p dir="auto">Or, you can manually install <a href="https://github.com/protocolbuffers/protobuf">protobuf C/C++ libraries and tools</a> with specified version before proceeding forward. Then depending on how you installed protobuf, you need to set environment variable CMAKE_ARGS to "-DONNX_USE_PROTOBUF_SHARED_LIBS=ON" or "-DONNX_USE_PROTOBUF_SHARED_LIBS=OFF".  For example, you may need to run the following command:</p>
<p dir="auto">Linux:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export CMAKE_ARGS=&quot;-DONNX_USE_PROTOBUF_SHARED_LIBS=ON&quot;"><pre><span class="pl-k">export</span> CMAKE_ARGS=<span class="pl-s"><span class="pl-pds">"</span>-DONNX_USE_PROTOBUF_SHARED_LIBS=ON<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">Windows:</p>
<div class="highlight highlight-source-batchfile notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="set CMAKE_ARGS=&quot;-DONNX_USE_PROTOBUF_SHARED_LIBS=ON&quot;"><pre><span class="pl-k">set</span> <span class="pl-smi">CMAKE_ARGS</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>-DONNX_USE_PROTOBUF_SHARED_LIBS=ON<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">The ON/OFF depends on what kind of protobuf library you have. Shared libraries are files ending with *.dll/*.so/*.dylib. Static libraries are files ending with *.a/*.lib. This option depends on how you get your protobuf library and how it was built. And it is default OFF. You don't need to run the commands above if you'd prefer to use a static protobuf library.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Windows</h3><a id="user-content-windows" class="anchor-element" aria-label="Permalink: Windows" href="#windows"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you are building ONNX from source, it is recommended that you also build Protobuf locally as a static library. The version distributed with conda-forge is a DLL, but ONNX expects it to be a static library. Building protobuf locally also lets you control the version of protobuf. The tested and recommended version is 3.21.12.</p>
<p dir="auto">The instructions in this README assume you are using Visual Studio.  It is recommended that you run all the commands from a shell started from "x64 Native Tools Command Prompt for VS 2019" and keep the build system generator for cmake (e.g., cmake -G "Visual Studio 16 2019") consistent while building protobuf as well as ONNX.</p>
<p dir="auto">You can get protobuf by running the following commands:</p>
<div class="highlight highlight-source-batchfile notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/protocolbuffers/protobuf.git
cd protobuf
git checkout v21.12
cd cmake
cmake -G &quot;Visual Studio 16 2019&quot; -A x64 -DCMAKE_INSTALL_PREFIX=&lt;protobuf_install_dir&gt; -Dprotobuf_MSVC_STATIC_RUNTIME=OFF -Dprotobuf_BUILD_SHARED_LIBS=OFF -Dprotobuf_BUILD_TESTS=OFF -Dprotobuf_BUILD_EXAMPLES=OFF .
msbuild protobuf.sln /m /p:Configuration=Release
msbuild INSTALL.vcxproj /p:Configuration=Release"><pre>git clone https://github.com/protocolbuffers/protobuf.git
<span class="pl-k">cd</span> protobuf
git checkout v21.12
<span class="pl-k">cd</span> cmake
cmake -G <span class="pl-s"><span class="pl-pds">"</span>Visual Studio 16 2019<span class="pl-pds">"</span></span> -A x64 -DCMAKE_INSTALL_PREFIX=<span class="pl-k">&lt;</span>protobuf_install_dir<span class="pl-k">&gt;</span> -Dprotobuf_MSVC_STATIC_RUNTIME=OFF -Dprotobuf_BUILD_SHARED_LIBS=OFF -Dprotobuf_BUILD_TESTS=OFF -Dprotobuf_BUILD_EXAMPLES=OFF .
msbuild protobuf.sln /m /p:Configuration=Release
msbuild INSTALL.vcxproj /p:Configuration=Release</pre></div>
<p dir="auto">Then it will be built as a static library and installed to &lt;protobuf_install_dir&gt;. Please add the bin directory(which contains protoc.exe) to your PATH.</p>
<div class="highlight highlight-source-batchfile notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="set PATH=&lt;protobuf_install_dir&gt;/bin;%PATH%"><pre><span class="pl-k">set</span> <span class="pl-smi">PATH</span><span class="pl-k">=</span><span class="pl-k">&lt;</span>protobuf_install_dir<span class="pl-k">&gt;</span>/bin;<span class="pl-smi">%PATH%</span></pre></div>
<p dir="auto">Please note: if your protobuf_install_dir contains spaces, <strong>do not</strong> add quotation marks around it.</p>
<p dir="auto">Alternative: if you don't want to change your PATH, you can set ONNX_PROTOC_EXECUTABLE instead.</p>
<div class="highlight highlight-source-batchfile notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="set CMAKE_ARGS=-DONNX_PROTOC_EXECUTABLE=&lt;full_path_to_protoc.exe&gt;"><pre><span class="pl-k">set</span> <span class="pl-smi">CMAKE_ARGS</span><span class="pl-k">=</span>-DONNX_PROTOC_EXECUTABLE=<span class="pl-k">&lt;</span>full_path_to_protoc.exe<span class="pl-k">&gt;</span></pre></div>
<p dir="auto">Then you can build ONNX as:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="git clone https://github.com/onnx/onnx.git
cd onnx
git submodule update --init --recursive
# prefer lite proto
set CMAKE_ARGS=-DONNX_USE_LITE_PROTO=ON
pip install -e ."><pre class="notranslate"><code>git clone https://github.com/onnx/onnx.git
cd onnx
git submodule update --init --recursive
# prefer lite proto
set CMAKE_ARGS=-DONNX_USE_LITE_PROTO=ON
pip install -e .
</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Linux</h3><a id="user-content-linux" class="anchor-element" aria-label="Permalink: Linux" href="#linux"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">First, you need to install protobuf. The minimum Protobuf compiler (protoc) version required by ONNX is 3.6.1. Please note that old protoc versions might not work with <code>CMAKE_ARGS=-DONNX_USE_LITE_PROTO=ON</code>.</p>
<p dir="auto">Ubuntu 20.04 (and newer) users may choose to install protobuf via</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="apt-get install python3-pip python3-dev libprotobuf-dev protobuf-compiler"><pre>apt-get install python3-pip python3-dev libprotobuf-dev protobuf-compiler</pre></div>
<p dir="auto">In this case, it is required to add <code>-DONNX_USE_PROTOBUF_SHARED_LIBS=ON</code> to CMAKE_ARGS in the ONNX build step.</p>
<p dir="auto">A more general way is to build and install it from source. See the instructions below for more details.</p>
<details>
  <summary> Installing Protobuf from source </summary>
<p dir="auto">Debian/Ubuntu:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="  git clone https://github.com/protocolbuffers/protobuf.git
  cd protobuf
  git checkout v21.12
  git submodule update --init --recursive
  mkdir build_source &amp;&amp; cd build_source
  cmake ../cmake -Dprotobuf_BUILD_SHARED_LIBS=OFF -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_SYSCONFDIR=/etc -DCMAKE_POSITION_INDEPENDENT_CODE=ON -Dprotobuf_BUILD_TESTS=OFF -DCMAKE_BUILD_TYPE=Release
  make -j$(nproc)
  make install"><pre>  git clone https://github.com/protocolbuffers/protobuf.git
  <span class="pl-c1">cd</span> protobuf
  git checkout v21.12
  git submodule update --init --recursive
  mkdir build_source <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">cd</span> build_source
  cmake ../cmake -Dprotobuf_BUILD_SHARED_LIBS=OFF -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_SYSCONFDIR=/etc -DCMAKE_POSITION_INDEPENDENT_CODE=ON -Dprotobuf_BUILD_TESTS=OFF -DCMAKE_BUILD_TYPE=Release
  make -j<span class="pl-s"><span class="pl-pds">$(</span>nproc<span class="pl-pds">)</span></span>
  make install</pre></div>
<p dir="auto">CentOS/RHEL/Fedora:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="  git clone https://github.com/protocolbuffers/protobuf.git
  cd protobuf
  git checkout v21.12
  git submodule update --init --recursive
  mkdir build_source &amp;&amp; cd build_source
  cmake ../cmake  -DCMAKE_INSTALL_LIBDIR=lib64 -Dprotobuf_BUILD_SHARED_LIBS=OFF -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_SYSCONFDIR=/etc -DCMAKE_POSITION_INDEPENDENT_CODE=ON -Dprotobuf_BUILD_TESTS=OFF -DCMAKE_BUILD_TYPE=Release
  make -j$(nproc)
  make install"><pre>  git clone https://github.com/protocolbuffers/protobuf.git
  <span class="pl-c1">cd</span> protobuf
  git checkout v21.12
  git submodule update --init --recursive
  mkdir build_source <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">cd</span> build_source
  cmake ../cmake  -DCMAKE_INSTALL_LIBDIR=lib64 -Dprotobuf_BUILD_SHARED_LIBS=OFF -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_INSTALL_SYSCONFDIR=/etc -DCMAKE_POSITION_INDEPENDENT_CODE=ON -Dprotobuf_BUILD_TESTS=OFF -DCMAKE_BUILD_TYPE=Release
  make -j<span class="pl-s"><span class="pl-pds">$(</span>nproc<span class="pl-pds">)</span></span>
  make install</pre></div>
<p dir="auto">Here "-DCMAKE_POSITION_INDEPENDENT_CODE=ON" is crucial. By default static libraries are built without "-fPIC" flag, they are not position independent code. But shared libraries must be position independent code. Python C/C++ extensions(like ONNX) are shared libraries. So if a static library was not built with "-fPIC", it can't be linked to such a shared library.</p>
<p dir="auto">Once build is successful, update PATH to include protobuf paths.</p>
</details>
<p dir="auto">Then you can build ONNX as:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/onnx/onnx.git
cd onnx
git submodule update --init --recursive
# Optional: prefer lite proto
export CMAKE_ARGS=-DONNX_USE_LITE_PROTO=ON
pip install -e ."><pre>git clone https://github.com/onnx/onnx.git
<span class="pl-c1">cd</span> onnx
git submodule update --init --recursive
<span class="pl-c"><span class="pl-c">#</span> Optional: prefer lite proto</span>
<span class="pl-k">export</span> CMAKE_ARGS=-DONNX_USE_LITE_PROTO=ON
pip install -e <span class="pl-c1">.</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Mac</h3><a id="user-content-mac" class="anchor-element" aria-label="Permalink: Mac" href="#mac"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export NUM_CORES=`sysctl -n hw.ncpu`
brew update
brew install autoconf &amp;&amp; brew install automake
wget https://github.com/protocolbuffers/protobuf/releases/download/v21.12/protobuf-cpp-3.21.12.tar.gz
tar -xvf protobuf-cpp-3.21.12.tar.gz
cd protobuf-3.21.12
mkdir build_source &amp;&amp; cd build_source
cmake ../cmake -Dprotobuf_BUILD_SHARED_LIBS=OFF -DCMAKE_POSITION_INDEPENDENT_CODE=ON -Dprotobuf_BUILD_TESTS=OFF -DCMAKE_BUILD_TYPE=Release
make -j${NUM_CORES}
make install"><pre><span class="pl-k">export</span> NUM_CORES=<span class="pl-s"><span class="pl-pds">`</span>sysctl -n hw.ncpu<span class="pl-pds">`</span></span>
brew update
brew install autoconf <span class="pl-k">&amp;&amp;</span> brew install automake
wget https://github.com/protocolbuffers/protobuf/releases/download/v21.12/protobuf-cpp-3.21.12.tar.gz
tar -xvf protobuf-cpp-3.21.12.tar.gz
<span class="pl-c1">cd</span> protobuf-3.21.12
mkdir build_source <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">cd</span> build_source
cmake ../cmake -Dprotobuf_BUILD_SHARED_LIBS=OFF -DCMAKE_POSITION_INDEPENDENT_CODE=ON -Dprotobuf_BUILD_TESTS=OFF -DCMAKE_BUILD_TYPE=Release
make -j<span class="pl-smi">${NUM_CORES}</span>
make install</pre></div>
<p dir="auto">Once build is successful, update PATH to include protobuf paths.</p>
<p dir="auto">Then you can build ONNX as:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="git clone --recursive https://github.com/onnx/onnx.git
cd onnx
# Optional: prefer lite proto
set CMAKE_ARGS=-DONNX_USE_LITE_PROTO=ON
pip install -e ."><pre>git clone --recursive https://github.com/onnx/onnx.git
<span class="pl-c1">cd</span> onnx
<span class="pl-c"><span class="pl-c">#</span> Optional: prefer lite proto</span>
<span class="pl-c1">set</span> CMAKE_ARGS=-DONNX_USE_LITE_PROTO=ON
pip install -e <span class="pl-c1">.</span></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Verify Installation</h2><a id="user-content-verify-installation" class="anchor-element" aria-label="Permalink: Verify Installation" href="#verify-installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">After installation, run</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="python -c &quot;import onnx&quot;"><pre>python -c <span class="pl-s"><span class="pl-pds">"</span>import onnx<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">to verify it works.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Common Build Options</h2><a id="user-content-common-build-options" class="anchor-element" aria-label="Permalink: Common Build Options" href="#common-build-options"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For full list refer to CMakeLists.txt</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Environment variables</h3><a id="user-content-environment-variables" class="anchor-element" aria-label="Permalink: Environment variables" href="#environment-variables"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><code>USE_MSVC_STATIC_RUNTIME</code> should be 1 or 0, not ON or OFF. When set to 1 onnx links statically to runtime library.
<strong>Default</strong>: <code>USE_MSVC_STATIC_RUNTIME=0</code></p>
</li>
<li>
<p dir="auto"><code>DEBUG</code> should be 0 or 1. When set to 1 onnx is built in debug mode. or debug versions of the dependencies, you need to open the <a href="https://github.com/onnx/onnx/blob/main/CMakeLists.txt">CMakeLists file</a> and append a letter <code>d</code> at the end of the package name lines. For example, <code>NAMES protobuf-lite</code> would become <code>NAMES protobuf-lited</code>.
<strong>Default</strong>: <code>Debug=0</code></p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">CMake variables</h3><a id="user-content-cmake-variables" class="anchor-element" aria-label="Permalink: CMake variables" href="#cmake-variables"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><code>ONNX_USE_PROTOBUF_SHARED_LIBS</code> should be <code>ON</code> or <code>OFF</code>.
<strong>Default</strong>: <code>ONNX_USE_PROTOBUF_SHARED_LIBS=OFF USE_MSVC_STATIC_RUNTIME=0</code>
<code>ONNX_USE_PROTOBUF_SHARED_LIBS</code> determines how onnx links to protobuf libraries.</p>
<ul dir="auto">
<li>When set to <code>ON</code> - onnx will dynamically link to protobuf shared libs, PROTOBUF_USE_DLLS will be defined as described <a href="https://github.com/protocolbuffers/protobuf/blob/main/cmake/README.md#dlls-vs-static-linking">here</a>, Protobuf_USE_STATIC_LIBS will be set to <code>OFF</code> and <code>USE_MSVC_STATIC_RUNTIME</code> must be 0.</li>
<li>When set to <code>OFF</code> - onnx will link statically to protobuf, and Protobuf_USE_STATIC_LIBS will be set to <code>ON</code> (to force the use of the static libraries) and <code>USE_MSVC_STATIC_RUNTIME</code> can be <code>0</code> or <code>1</code>.</li>
</ul>
</li>
<li>
<p dir="auto"><code>ONNX_USE_LITE_PROTO</code> should be <code>ON</code> or <code>OFF</code>. When set to <code>ON</code> onnx uses lite protobuf instead of full protobuf.
<strong>Default</strong>: <code>ONNX_USE_LITE_PROTO=OFF</code></p>
</li>
<li>
<p dir="auto"><code>ONNX_WERROR</code> should be <code>ON</code> or <code>OFF</code>. When set to <code>ON</code> warnings are treated as errors.
<strong>Default</strong>: <code>ONNX_WERROR=OFF</code> in local builds, <code>ON</code> in CI and release pipelines.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Common Errors</h2><a id="user-content-common-errors" class="anchor-element" aria-label="Permalink: Common Errors" href="#common-errors"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Note: the <code>import onnx</code> command does not work from the source checkout directory; in this case you'll see <code>ModuleNotFoundError: No module named 'onnx.onnx_cpp2py_export'</code>. Change into another directory to fix this error.</p>
</li>
<li>
<p dir="auto">If you run into any issues while building Protobuf as a static library, please ensure that shared Protobuf libraries, like libprotobuf, are not installed on your device or in the conda environment. If these shared libraries exist, either remove them to build Protobuf from source as a static library, or skip the Protobuf build from source to use the shared version directly.</p>
</li>
<li>
<p dir="auto">If you run into any issues while building ONNX from source, and your error message reads, <code>Could not find pythonXX.lib</code>, ensure that you have consistent Python versions for common commands, such as <code>python</code> and <code>pip</code>. Clean all existing build files and rebuild ONNX again.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Testing</h1><a id="user-content-testing" class="anchor-element" aria-label="Permalink: Testing" href="#testing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">ONNX uses <a href="https://docs.pytest.org" rel="nofollow">pytest</a> as test driver. In order to run tests, you will first need to install <code>pytest</code>:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pip install pytest nbval"><pre>pip install pytest nbval</pre></div>
<p dir="auto">After installing pytest, use the following command to run tests.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pytest"><pre>pytest</pre></div>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Development</h1><a id="user-content-development" class="anchor-element" aria-label="Permalink: Development" href="#development"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Check out the <a href="https://github.com/onnx/onnx/blob/main/CONTRIBUTING.md">contributor guide</a> for instructions.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">License</h1><a id="user-content-license" class="anchor-element" aria-label="Permalink: License" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="LICENSE">Apache License v2.0</a></p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Code of Conduct</h1><a id="user-content-code-of-conduct" class="anchor-element" aria-label="Permalink: Code of Conduct" href="#code-of-conduct"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://onnx.ai/codeofconduct.html" rel="nofollow">ONNX Open Source Code of Conduct</a></p>
</article></div>