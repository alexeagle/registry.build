<div id="readme" class="rst" data-path="README.rst"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 id="user-content-c-blosc2" class="heading-element" dir="auto">C-Blosc2</h1><a id="user-content-c-blosc2" class="anchor" aria-label="Permalink: C-Blosc2" href="#c-blosc2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 id="user-content-a-fast-compressed-and-persistent-data-store-library-for-c" class="heading-element" dir="auto">A fast, compressed and persistent data store library for C</h2><a id="user-content-a-fast-compressed-and-persistent-data-store-library-for-c" class="anchor" aria-label="Permalink: A fast, compressed and persistent data store library for C" href="#a-fast-compressed-and-persistent-data-store-library-for-c"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<dl>
<dt>Author</dt>
<dd><p dir="auto">Blosc Development Team</p>
</dd>
<dt>Contact</dt>
<dd><p dir="auto"><a href="mailto:blosc@blosc.org">blosc@blosc.org</a></p>
</dd>
<dt>URL</dt>
<dd><p dir="auto"><a href="https://www.blosc.org" rel="nofollow">https://www.blosc.org</a></p>
</dd>
<dt>Gitter</dt>
<dd><p dir="auto"><a href="https://gitter.im/Blosc/c-blosc?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="nofollow"><img src="https://camo.githubusercontent.com/d1d8a84a5affef0b71233a6a8cfb100c0bfe15df8879a6bc68af15efac21346b/68747470733a2f2f6261646765732e6769747465722e696d2f426c6f73632f632d626c6f73632e737667" alt="Join the chat at https://gitter.im/Blosc/c-blosc" data-canonical-src="https://badges.gitter.im/Blosc/c-blosc.svg" style="max-width: 100%;"></a></p>
</dd>
<dt>Actions</dt>
<dd><p dir="auto"><a href="https://github.com/Blosc/c-blosc2/actions?query=workflow%3A%22CI+CMake%22"><img src="https://github.com/Blosc/c-blosc2/workflows/CI%20CMake/badge.svg" alt="actions" style="max-width: 100%;"></a></p>
</dd>
<dt>NumFOCUS</dt>
<dd><p dir="auto"><a href="https://numfocus.org" rel="nofollow"><img src="https://camo.githubusercontent.com/65091374ff68137c0dccff1ea1f37f2625604d37e1a16a3a84c49a1a978938d9/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706f776572656425323062792d4e756d464f4355532d6f72616e67652e7376673f7374796c653d666c617426636f6c6f72413d45313532334426636f6c6f72423d303037443841" alt="numfocus" data-canonical-src="https://img.shields.io/badge/powered%20by-NumFOCUS-orange.svg?style=flat&amp;colorA=E1523D&amp;colorB=007D8A" style="max-width: 100%;"></a></p>
</dd>
<dt>Code of Conduct</dt>
<dd><p dir="auto"><a href="https://github.com/Blosc/community/blob/master/code_of_conduct.md"><img src="https://camo.githubusercontent.com/20fe195dfecc3508e105ec04e6a1acea97bd409201ac6ca09c07942c8a8e4ad2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436f6e7472696275746f72253230436f76656e616e742d76322e3025323061646f707465642d6666363962342e737667" alt="Contributor Covenant" data-canonical-src="https://img.shields.io/badge/Contributor%20Covenant-v2.0%20adopted-ff69b4.svg" style="max-width: 100%;"></a></p>
</dd>
</dl>
<div class="markdown-heading" dir="auto"><h2 id="user-content-what-is-it" class="heading-element" dir="auto">What is it?</h2><a id="user-content-what-is-it" class="anchor" aria-label="Permalink: What is it?" href="#what-is-it"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://www.blosc.org/pages/blosc-in-depth/" rel="nofollow">Blosc</a> is a high performance compressor optimized for binary data (i.e. floating point numbers, integers and booleans, although it can handle string data too). It has been designed to transmit data to the processor cache faster than the traditional, non-compressed, direct memory fetch approach via a memcpy() OS call. Blosc main goal is not just to reduce the size of large datasets on-disk or in-memory, but also to accelerate memory-bound computations.</p>
<p dir="auto">C-Blosc2 is the new major version of <a href="https://github.com/Blosc/c-blosc">C-Blosc</a>, and is backward compatible with both the C-Blosc1 API and its in-memory format. However, the reverse thing is generally not true for the format; buffers generated with C-Blosc2 are not format-compatible with C-Blosc1 (i.e. forward compatibility is not supported). In case you want to ensure full API compatibility with C-Blosc1 API, define the <span>BLOSC1_COMPAT</span> symbol.</p>
<p dir="auto">See a 3 minutes <a href="https://www.youtube.com/watch?v=ER12R7FXosk" rel="nofollow">introductory video to Blosc2</a>.</p>
<div class="markdown-heading" dir="auto"><h2 id="user-content-blosc2-ndim-an-n-dimensional-store" class="heading-element" dir="auto">Blosc2 NDim: an N-Dimensional store</h2><a id="user-content-blosc2-ndim-an-n-dimensional-store" class="anchor" aria-label="Permalink: Blosc2 NDim: an N-Dimensional store" href="#blosc2-ndim-an-n-dimensional-store"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">One of the latest and more exciting additions in C-Blosc2 is the <a href="https://www.blosc.org/c-blosc2/reference/b2nd.html" rel="nofollow">Blosc2 NDim layer</a> (or b2nd for short), allowing to create <em>and</em> read n-dimensional datasets in an extremely efficient way thanks to a n-dim 2-level partitioning, that allows to slice and dice arbitrary large and compressed data in a more fine-grained way:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Blosc/c-blosc2/blob/main/images/b2nd-2level-parts.png?raw=true"><img src="https://github.com/Blosc/c-blosc2/raw/main/images/b2nd-2level-parts.png?raw=true" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">To wet you appetite, here it is how the <span>NDArray</span> object in the <a href="#python-wrapper">Python wrapper</a> performs on getting slices orthogonal to the different axis of a 4-dim dataset:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Blosc/c-blosc2/blob/main/images/Read-Partial-Slices-B2ND.png?raw=true"><img src="https://github.com/Blosc/c-blosc2/raw/main/images/Read-Partial-Slices-B2ND.png?raw=true" alt="image" style="max-width: 100%;"></a></p>
<p dir="auto">We have blogged about this: <a href="https://www.blosc.org/posts/blosc2-ndim-intro" rel="nofollow">https://www.blosc.org/posts/blosc2-ndim-intro</a></p>
<p dir="auto">We also have a ~2 min explanatory video on <a href="https://www.youtube.com/watch?v=LvP9zxMGBng" rel="nofollow">why slicing in a pineapple-style (aka double partition) is useful</a>:</p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=LvP9zxMGBng" rel="nofollow"><img src="https://github.com/Blosc/blogsite/raw/master/files/images/slicing-pineapple-style.png?raw=true" alt="Slicing a dataset in pineapple-style" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 id="user-content-new-features-in-c-blosc2" class="heading-element" dir="auto">New features in C-Blosc2</h2><a id="user-content-new-features-in-c-blosc2" class="anchor" aria-label="Permalink: New features in C-Blosc2" href="#new-features-in-c-blosc2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><strong>64-bit containers:</strong> the first-class container in C-Blosc2 is the <span>super-chunk</span> or, for brevity, <span>schunk</span>, that is made by smaller chunks which are essentially C-Blosc1 32-bit containers. The super-chunk can be backed or not by another container which is called a <span>frame</span> (see later).</li>
<li><strong>NDim containers (b2nd):</strong> allow to store n-dimensional data that can efficiently read datasets in slices that can be n-dimensional too. To achieve this, a n-dimensional 2-level partitioning has been implemented. This capabilities were formerly part of <a href="https://github.com/Blosc/caterva">Caterva</a>, and now it is included in C-Blosc2 for convenience. Caterva is now deprecated.</li>
<li><strong>More filters:</strong> besides <span>shuffle</span> and <span>bitshuffle</span> already present in C-Blosc1, C-Blosc2 already implements:
<ul dir="auto">
<li>`bytedelta`: calculates the difference between bytes in a block that has been shuffled already. We have <a href="https://www.blosc.org/posts/bytedelta-enhance-compression-toolset/" rel="nofollow">blogged about bytedelta</a>.</li>
<li>`delta`: the stored blocks inside a chunk are diff'ed with respect to first block in the chunk. The idea is that, in some situations, the diff will have more zeros than the original data, leading to better compression.</li>
<li>`trunc_prec`: it zeroes the least significant bits of the mantissa of float32 and float64 types. When combined with the <span>shuffle</span> or <span>bitshuffle</span> filter, this leads to more contiguous zeros, which are compressed better.</li>
</ul></li>
<li><strong>A filter pipeline:</strong> the different filters can be pipelined so that the output of one can the input for the other. A possible example is a <span>delta</span> followed by <span>shuffle</span>, or as described above, <span>trunc_prec</span> followed by <span>bitshuffle</span>.</li>
<li><strong>Prefilters:</strong> allow to apply user-defined C callbacks <strong>prior</strong> the filter pipeline during compression. See <a href="https://github.com/Blosc/c-blosc2/blob/main/tests/test_prefilter.c">test_prefilter.c</a> for an example of use.</li>
<li><strong>Postfilters:</strong> allow to apply user-defined C callbacks <strong>after</strong> the filter pipeline during decompression. The combination of prefilters and postfilters could be interesting for supporting e.g. encryption (via prefilters) and decryption (via postfilters). Also, a postfilter alone can be used to produce on-the-flight computation based on existing data (or other metadata, like e.g. coordinates). See <a href="https://github.com/Blosc/c-blosc2/blob/main/tests/test_postfilter.c">test_postfilter.c</a> for an example of use.</li>
<li><strong>SIMD support for ARM (NEON):</strong> this allows for faster operation on ARM architectures. Only <span>shuffle</span> is supported right now, but the idea is to implement <span>bitshuffle</span> for NEON too. Thanks to Lucian Marc.</li>
<li><strong>SIMD support for PowerPC (ALTIVEC):</strong> this allows for faster operation on PowerPC architectures. Both <span>shuffle</span> and <span>bitshuffle</span> are supported; however, this has been done via a transparent mapping from SSE2 into ALTIVEC emulation in GCC 8, so performance could be better (but still, it is already a nice improvement over native C code; see PR <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="451990091" data-permission-text="Title is private" data-url="https://github.com/Blosc/c-blosc2/issues/59" data-hovercard-type="pull_request" data-hovercard-url="/Blosc/c-blosc2/pull/59/hovercard" href="https://github.com/Blosc/c-blosc2/pull/59">#59</a> for details). Thanks to Jerome Kieffer and <a href="https://www.esrf.fr" rel="nofollow">ESRF</a> for sponsoring the Blosc team in helping him in this task.</li>
<li><strong>Dictionaries:</strong> when a block is going to be compressed, C-Blosc2 can use a previously made dictionary (stored in the header of the super-chunk) for compressing all the blocks that are part of the chunks. This usually improves the compression ratio, as well as the decompression speed, at the expense of a (small) overhead in compression speed. Currently, it is only supported in the <span>zstd</span> codec, but would be nice to extend it to <span>lz4</span> and <span>blosclz</span> at least.</li>
<li><strong>Contiguous frames:</strong> allow to store super-chunks contiguously, either on-disk or in-memory. When a super-chunk is backed by a frame, instead of storing all the chunks sparsely in-memory, they are serialized inside the frame container. The frame can be stored on-disk too, meaning that persistence of super-chunks is supported.</li>
<li><strong>Sparse frames:</strong> each chunk in a super-chunk is stored in a separate file or different memory area, as well as the metadata. This is allows for more efficient updates/deletes than in contiguous frames (i.e. avoiding 'holes' in monolithic files). The drawback is that it consumes more inodes when on-disk. Thanks to Marta Iborra for this contribution.</li>
<li><strong>Partial chunk reads:</strong> there is support for reading just part of chunks, so avoiding to read the whole thing and then discard the unnecessary data.</li>
<li><strong>Parallel chunk reads:</strong> when several blocks of a chunk are to be read, this is done in parallel by the decompressing machinery. That means that every thread is responsible to read, post-filter and decompress a block by itself, leading to an efficient overlap of I/O and CPU usage that optimizes reads to a maximum.</li>
<li><strong>Meta-layers:</strong> optionally, the user can add meta-data for different uses and in different layers. For example, one may think on providing a meta-layer for <a href="https://numpy.org" rel="nofollow">NumPy</a> so that most of the meta-data for it is stored in a meta-layer; then, one can place another meta-layer on top of the latter for adding more high-level info if desired (e.g. geo-spatial, meteorological...).</li>
<li><strong>Variable length meta-layers:</strong> the user may want to add variable-length meta information that can be potentially very large (up to 2 GB). The regular meta-layer described above is very quick to read, but meant to store fixed-length and relatively small meta information. Variable length metalayers are stored in the trailer of a frame, whereas regular meta-layers are in the header.</li>
<li><strong>Efficient support for special values:</strong> large sequences of repeated values can be represented with an efficient, simple and fast run-length representation, without the need to use regular codecs. With that, chunks or super-chunks with values that are the same (zeros, NaNs or any value in general) can be built in constant time, regardless of the size. This can be useful in situations where a lot of zeros (or NaNs) need to be stored (e.g. sparse matrices).</li>
<li><strong>Nice markup for documentation:</strong> we are currently using a combination of Sphinx + Doxygen + Breathe for documenting the C-API. See <a href="https://www.blosc.org/c-blosc2/c-blosc2.html" rel="nofollow">https://www.blosc.org/c-blosc2/c-blosc2.html</a>. Thanks to Alberto Sabater and Aleix Alcacer for contributing the support for this.</li>
<li><strong>Plugin capabilities for filters and codecs:</strong> we have a plugin register capability inplace so that the info about the new filters and codecs can be persisted and transmitted to different machines. See <a href="https://github.com/Blosc/c-blosc2/blob/main/examples/urfilters.c">https://github.com/Blosc/c-blosc2/blob/main/examples/urfilters.c</a> for a self-contained example. Thanks to the NumFOCUS foundation for providing a grant for doing this, and Oscar Griñón and Aleix Alcacer for the implementation.</li>
<li><strong>Pluggable tuning capabilities:</strong> this will allow users with different needs to define an interface so as to better tune different parameters like the codec, the compression level, the filters to use, the blocksize or the shuffle size. Thanks to ironArray for sponsoring us in doing this.</li>
<li><strong>Support for I/O plugins:</strong> so that users can extend the I/O capabilities beyond the current filesystem support. Things like the use of databases or S3 interfaces should be possible by implementing these interfaces. Thanks to ironArray for sponsoring us in doing this.</li>
<li><strong>Python wrapper:</strong> we have a preliminary wrapper in the works. You can have a look at our ongoing efforts in the <a href="https://github.com/Blosc/python-blosc2">python-blosc2 repo</a>. Thanks to the Python Software Foundation for providing a grant for doing this.</li>
<li><strong>Security:</strong> we are actively using using the <a href="https://github.com/google/oss-fuzz">OSS-Fuzz</a> and <a href="https://oss-fuzz.com" rel="nofollow">ClusterFuzz</a> for uncovering programming errors in C-Blosc2. Thanks to Google for sponsoring us in doing this, and to Nathan Moinvaziri for most of the work here.</li>
</ul>
<p dir="auto">More info about the <a href="https://www.blosc.org/docs/Caterva-HDF5-Workshop.pdf" rel="nofollow">improved capabilities of C-Blosc2 can be found in this talk</a>.</p>
<p dir="auto">C-Blosc2 API and format have been frozen, and that means that there is guarantee that your programs will continue to work with future versions of the library, and that next releases will be able to read from persistent storage generated from previous releases (as of 2.0.0).</p>
<div class="markdown-heading" dir="auto"><h2 id="user-content-python-wrapper" class="heading-element" dir="auto">Python wrapper</h2><a id="user-content-python-wrapper" class="anchor" aria-label="Permalink: Python wrapper" href="#python-wrapper"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We are officially supporting (thanks to the Python Software Foundation) a <a href="https://github.com/Blosc/python-blosc2">Python wrapper for Blosc2</a>. It supports all the features of the predecessor <a href="https://github.com/Blosc/python-blosc">python-blosc</a> package plus most of the bells and whistles of C-Blosc2, like 64-bit and multidimensional containers. As a bonus, the <span>python-blosc2</span> package comes with wheels and binary versions of the C-Blosc2 libraries, so anyone, even non-Python users can install C-Blosc2 binaries easily with:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="pip install blosc2"><pre class="notranslate"><code>pip install blosc2</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 id="user-content-compiling-the-c-blosc2-library-with-cmake" class="heading-element" dir="auto">Compiling the C-Blosc2 library with CMake</h2><a id="user-content-compiling-the-c-blosc2-library-with-cmake" class="anchor" aria-label="Permalink: Compiling the C-Blosc2 library with CMake" href="#compiling-the-c-blosc2-library-with-cmake"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Blosc can be built, tested and installed using <a href="https://cmake.org" rel="nofollow">CMake</a>. The following procedure describes a typical CMake build.</p>
<p dir="auto">Create the build directory inside the sources and move into it:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="git clone https://github.com/Blosc/c-blosc2
cd c-blosc2
mkdir build
cd build"><pre class="notranslate"><code>git clone https://github.com/Blosc/c-blosc2
cd c-blosc2
mkdir build
cd build</code></pre></div>
<p dir="auto">Now run CMake configuration and optionally specify the installation directory (e.g. '/usr' or '/usr/local'):</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cmake -DCMAKE_INSTALL_PREFIX=your_install_prefix_directory .."><pre class="notranslate"><code>cmake -DCMAKE_INSTALL_PREFIX=your_install_prefix_directory ..</code></pre></div>
<p dir="auto">CMake allows to configure Blosc in many different ways, like preferring internal or external sources for compressors or enabling/disabling them. Please note that configuration can also be performed using UI tools provided by CMake (<span>ccmake</span> or <span>cmake-gui</span>):</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="ccmake ..      # run a curses-based interface
cmake-gui ..   # run a graphical interface"><pre class="notranslate"><code>ccmake ..      # run a curses-based interface
cmake-gui ..   # run a graphical interface</code></pre></div>
<p dir="auto">Build, test and install Blosc:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cmake --build .
ctest
cmake --build . --target install"><pre class="notranslate"><code>cmake --build .
ctest
cmake --build . --target install</code></pre></div>
<p dir="auto">The static and dynamic version of the Blosc library, together with header files, will be installed into the specified CMAKE_INSTALL_PREFIX.</p>
<p dir="auto">Once you have compiled your Blosc library, you can easily link your apps with it as shown in the <a href="https://github.com/Blosc/c-blosc2/blob/main/examples">examples/ directory</a>.</p>
<div class="markdown-heading" dir="auto"><h3 id="user-content-handling-support-for-codecs-lz4-lz4hc-zstd-zlib" class="heading-element" dir="auto">Handling support for codecs (LZ4, LZ4HC, Zstd, Zlib)</h3><a id="user-content-handling-support-for-codecs-lz4-lz4hc-zstd-zlib" class="anchor" aria-label="Permalink: Handling support for codecs (LZ4, LZ4HC, Zstd, Zlib)" href="#handling-support-for-codecs-lz4-lz4hc-zstd-zlib"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">C-Blosc2 comes with full sources for LZ4, LZ4HC, Zstd, and Zlib and in general, you should not worry about not having (or CMake not finding) the libraries in your system because by default the included sources will be automatically compiled and included in the C-Blosc2 library. This means that you can be confident in having a complete support for all these codecs in all the official Blosc deployments. Of course, if you consider this is too bloated, you can exclude support for some of them.</p>
<p dir="auto">For example, let's suppose that you want to disable support for Zstd:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cmake -DDEACTIVATE_ZSTD=ON .."><pre class="notranslate"><code>cmake -DDEACTIVATE_ZSTD=ON ..</code></pre></div>
<p dir="auto">Or, you may want to use a codec in an external library already in the system:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cmake -DPREFER_EXTERNAL_LZ4=ON .."><pre class="notranslate"><code>cmake -DPREFER_EXTERNAL_LZ4=ON ..</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 id="user-content-supported-platforms" class="heading-element" dir="auto">Supported platforms</h3><a id="user-content-supported-platforms" class="anchor" aria-label="Permalink: Supported platforms" href="#supported-platforms"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">C-Blosc2 is meant to support all platforms where a C99 compliant C compiler can be found. The ones that are mostly tested are Intel (Linux, Mac OSX and Windows), ARM (Linux, Mac), and PowerPC (Linux). More on ARM support in <span>README_ARM.rst</span>.</p>
<p dir="auto">For Windows, you will need at least VS2015 or higher on x86 and x64 targets (i.e. ARM is not supported on Windows).</p>
<p dir="auto">For Mac OSX, make sure that you have the command line developer tools available. You can always install them with:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="xcode-select --install"><pre class="notranslate"><code>xcode-select --install</code></pre></div>
<p dir="auto">For Mac OSX on arm64 architecture, you may want to compile it like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="CC=&quot;clang -arch arm64&quot; cmake .."><pre class="notranslate"><code>CC="clang -arch arm64" cmake ..</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 id="user-content-display-error-messages" class="heading-element" dir="auto">Display error messages</h3><a id="user-content-display-error-messages" class="anchor" aria-label="Permalink: Display error messages" href="#display-error-messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">By default error messages are disabled. To display them, you just need to activate the Blosc tracing machinery by setting the <code>BLOSC_TRACE</code> environment variable.</p>
<div class="markdown-heading" dir="auto"><h2 id="user-content-contributing" class="heading-element" dir="auto">Contributing</h2><a id="user-content-contributing" class="anchor" aria-label="Permalink: Contributing" href="#contributing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you want to collaborate in this development you are welcome. We need help in the different areas listed at the <a href="https://github.com/Blosc/c-blosc2/blob/main/ROADMAP.rst">ROADMAP</a>; also, be sure to read our <a href="https://github.com/Blosc/c-blosc2/blob/main/DEVELOPING-GUIDE.rst">DEVELOPING-GUIDE</a> and our <a href="https://github.com/Blosc/community/blob/master/code_of_conduct.md">Code of Conduct</a>. Blosc is distributed using the <a href="https://github.com/Blosc/c-blosc2/blob/main/LICENSE.txt">BSD license</a>.</p>
<div class="markdown-heading" dir="auto"><h2 id="user-content-tweeter-feed" class="heading-element" dir="auto">Tweeter feed</h2><a id="user-content-tweeter-feed" class="anchor" aria-label="Permalink: Tweeter feed" href="#tweeter-feed"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Follow <a href="https://twitter.com/Blosc2" rel="nofollow">@Blosc2</a> so as to get informed about the latest developments.</p>
<div class="markdown-heading" dir="auto"><h2 id="user-content-citing-blosc" class="heading-element" dir="auto">Citing Blosc</h2><a id="user-content-citing-blosc" class="anchor" aria-label="Permalink: Citing Blosc" href="#citing-blosc"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can cite our work on the different libraries under the Blosc umbrella as:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="@ONLINE{blosc,
  author = {{Blosc Development Team}},
  title = &quot;{A fast, compressed and persistent data store library}&quot;,
  year = {2009-2023},
  note = {https://blosc.org}
}"><pre class="notranslate"><code>@ONLINE{blosc,
  author = {{Blosc Development Team}},
  title = "{A fast, compressed and persistent data store library}",
  year = {2009-2023},
  note = {https://blosc.org}
}</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 id="user-content-acknowledgments" class="heading-element" dir="auto">Acknowledgments</h2><a id="user-content-acknowledgments" class="anchor" aria-label="Permalink: Acknowledgments" href="#acknowledgments"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See <a href="https://github.com/Blosc/c-blosc2/blob/main/THANKS.rst">THANKS document</a>.</p>
<hr>
<p dir="auto">-- Blosc Development Team. <strong>We make compression better.</strong></p>
</article></div>