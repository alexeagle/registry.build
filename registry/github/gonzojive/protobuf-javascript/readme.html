<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Protocol Buffers - Google's data interchange format</h1><a id="user-content-protocol-buffers---googles-data-interchange-format" class="anchor" aria-label="Permalink: Protocol Buffers - Google's data interchange format" href="#protocol-buffers---googles-data-interchange-format"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Copyright 2008 Google Inc.</p>
<p dir="auto">This directory contains the JavaScript Protocol Buffers runtime library.</p>
<p dir="auto">The library is currently compatible with:</p>
<ol dir="auto">
<li>CommonJS-style imports (eg. <code>var protos = require('my-protos');</code>)</li>
<li>Closure-style imports (eg. <code>goog.require('my.package.MyProto');</code>)</li>
</ol>
<p dir="auto">Support for ES6-style imports is not implemented yet.  Browsers can
be supported by using Browserify, webpack, Closure Compiler, etc. to
resolve imports at compile time.</p>
<p dir="auto">To use Protocol Buffers with JavaScript, you need two main components:</p>
<ol dir="auto">
<li>The protobuf runtime library.  You can install this with
<code>npm install google-protobuf</code>, or use the files in this directory.
If npm is not being used, as of 3.3.0, the files needed are located in binary subdirectory;
arith.js, constants.js, decoder.js, encoder.js, map.js, message.js, reader.js, utils.js, writer.js</li>
<li>The Protocol Compiler <code>protoc</code>.  This translates <code>.proto</code> files
into <code>.js</code> files.  The compiler is not currently available via
npm, but you can download a pre-built binary
<a href="https://github.com/protocolbuffers/protobuf/releases">on GitHub</a>
(look for the <code>protoc-*.zip</code> files under <strong>Downloads</strong>).</li>
</ol>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Project Status as of September 2022</h1><a id="user-content-project-status-as-of-september-2022" class="anchor" aria-label="Permalink: Project Status as of September 2022" href="#project-status-as-of-september-2022"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This project is currently in a somewhat broken state that we are working to rectify. We expect to have updated releases by the end of September 2022.</p>
<p dir="auto"><strong>Support Status</strong></p>
<p dir="auto">Protobuf JavaScript is widely used and well maintained internally at Google but does not currently have staffing for more than minimal support for this open source project.</p>
<p dir="auto"><strong>Contributing</strong></p>
<p dir="auto">Contributions should preserve existing behavior where possible.  Current customers rely on applications continuing to work across minor version upgrades.</p>
<p dir="auto">We also currently have limited staffing for this project, as such we encourage small targeted contributions.  Thanks!</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Setup</h1><a id="user-content-setup" class="anchor" aria-label="Permalink: Setup" href="#setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">First, obtain the Protocol Compiler.  The easiest way is to download
a pre-built binary from <a href="https://github.com/protocolbuffers/protobuf/releases">https://github.com/protocolbuffers/protobuf/releases</a>.</p>
<p dir="auto">If you want, you can compile <code>protoc</code> from source instead.  To do this
follow the instructions in <a href="https://github.com/protocolbuffers/protobuf/blob/main/src/README.md">the top-level
README</a>.</p>
<p dir="auto">Once you have <code>protoc</code> compiled, you can run the tests provided along with our
project to examine whether it can run successfully. In order to do this, you
should download the Protocol Buffer source code from the release page with the
link above. Then extract the source code and navigate to the folder named <code>js</code>
containing a <code>package.json</code> file and a series of test files. In this folder, you
can run the commands below to run the tests automatically.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ npm install
$ PROTOC_INC=/usr/include/google/protobuf npm test"><pre class="notranslate"><code>$ npm install
$ PROTOC_INC=/usr/include/google/protobuf npm test
</code></pre></div>
<p dir="auto"><code>PROTOC_INC</code> specifies the protobuf include path. By default, we use <code>protoc</code>
located from <code>PATH</code>. Optionally, you can use the <code>PROTOC</code> enviroment variable to
specify an alternative <code>protoc</code>.</p>
<p dir="auto">This will run two separate copies of the tests: one that uses
Closure Compiler style imports and one that uses CommonJS imports.
You can see all the CommonJS files in <code>commonjs_out/</code>.
If all of these tests pass, you know you have a working setup.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Using Protocol Buffers in your own project</h1><a id="user-content-using-protocol-buffers-in-your-own-project" class="anchor" aria-label="Permalink: Using Protocol Buffers in your own project" href="#using-protocol-buffers-in-your-own-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To use Protocol Buffers in your own project, you need to integrate
the Protocol Compiler into your build system.  The details are a
little different depending on whether you are using Closure imports
or CommonJS imports:</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Closure Imports</h2><a id="user-content-closure-imports" class="anchor" aria-label="Permalink: Closure Imports" href="#closure-imports"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you want to use Closure imports, your build should run a command
like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ protoc --js_out=library=myproto_libs,binary:. messages.proto base.proto"><pre class="notranslate"><code>$ protoc --js_out=library=myproto_libs,binary:. messages.proto base.proto
</code></pre></div>
<p dir="auto">For Closure imports, <code>protoc</code> will generate a single output file
(<code>myproto_libs.js</code> in this example).  The generated file will <code>goog.provide()</code>
all of the types defined in your .proto files.  For example, for the unit
tests the generated files contain many <code>goog.provide</code> statements like:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="goog.provide('proto.google.protobuf.DescriptorProto');
goog.provide('proto.google.protobuf.DescriptorProto.ExtensionRange');
goog.provide('proto.google.protobuf.DescriptorProto.ReservedRange');
goog.provide('proto.google.protobuf.EnumDescriptorProto');
goog.provide('proto.google.protobuf.EnumOptions');"><pre class="notranslate"><code>goog.provide('proto.google.protobuf.DescriptorProto');
goog.provide('proto.google.protobuf.DescriptorProto.ExtensionRange');
goog.provide('proto.google.protobuf.DescriptorProto.ReservedRange');
goog.provide('proto.google.protobuf.EnumDescriptorProto');
goog.provide('proto.google.protobuf.EnumOptions');
</code></pre></div>
<p dir="auto">The generated code will also <code>goog.require()</code> many types in the core library,
and they will require many types in the Google Closure library.  So make sure
that your <code>goog.provide()</code> / <code>goog.require()</code> setup can find all of your
generated code, the core library <code>.js</code> files in this directory, and the
Google Closure library itself.</p>
<p dir="auto">Once you've done this, you should be able to import your types with
statements like:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="goog.require('proto.my.package.MyMessage');

var message = proto.my.package.MyMessage();"><pre class="notranslate"><code>goog.require('proto.my.package.MyMessage');

var message = proto.my.package.MyMessage();
</code></pre></div>
<p dir="auto">If unfamiliar with Closure or its compiler, consider reviewing
<a href="https://developers.google.com/closure/library" rel="nofollow">Closure documentation</a>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">CommonJS imports</h2><a id="user-content-commonjs-imports" class="anchor" aria-label="Permalink: CommonJS imports" href="#commonjs-imports"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you want to use CommonJS imports, your build should run a command
like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ protoc --js_out=import_style=commonjs,binary:. messages.proto base.proto"><pre class="notranslate"><code>$ protoc --js_out=import_style=commonjs,binary:. messages.proto base.proto
</code></pre></div>
<p dir="auto">For CommonJS imports, <code>protoc</code> will spit out one file per input file
(so <code>messages_pb.js</code> and <code>base_pb.js</code> in this example).  The generated
code will depend on the core runtime, which should be in a file called
<code>google-protobuf.js</code>.  If you are installing from <code>npm</code>, this file should
already be built and available.  If you are running from GitHub, you need
to build it first by running:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ gulp dist"><pre class="notranslate"><code>$ gulp dist
</code></pre></div>
<p dir="auto">Once you've done this, you should be able to import your types with
statements like:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var messages = require('./messages_pb');

var message = new messages.MyMessage();"><pre class="notranslate"><code>var messages = require('./messages_pb');

var message = new messages.MyMessage();
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">The <code>--js_out</code> flag</h2><a id="user-content-the---js_out-flag" class="anchor" aria-label="Permalink: The --js_out flag" href="#the---js_out-flag"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The syntax of the <code>--js_out</code> flag is:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="--js_out=[OPTIONS:]output_dir"><pre class="notranslate"><code>--js_out=[OPTIONS:]output_dir
</code></pre></div>
<p dir="auto">Where <code>OPTIONS</code> are separated by commas.  Options are either <code>opt=val</code> or
just <code>opt</code> (for options that don't take a value).  The available options
are specified and documented in the <code>GeneratorOptions</code> struct in
<a href="https://github.com/protocolbuffers/protobuf/blob/main/src/google/protobuf/compiler/js/js_generator.h#L53">src/google/protobuf/compiler/js/js_generator.h</a>.</p>
<p dir="auto">Some examples:</p>
<ul dir="auto">
<li><code>--js_out=library=myprotos_lib.js,binary:.</code>: this contains the options
<code>library=myprotos.lib.js</code> and <code>binary</code> and outputs to the current directory.
The <code>import_style</code> option is left to the default, which is <code>closure</code>.</li>
<li><code>--js_out=import_style=commonjs,binary:protos</code>: this contains the options
<code>import_style=commonjs</code> and <code>binary</code> and outputs to the directory <code>protos</code>.
<code>import_style=commonjs_strict</code> doesn't expose the output on the global scope.</li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">API</h1><a id="user-content-api" class="anchor" aria-label="Permalink: API" href="#api"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The API is not well-documented yet.  Here is a quick example to give you an
idea of how the library generally works:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="var message = new MyMessage();

message.setName(&quot;John Doe&quot;);
message.setAge(25);
message.setPhoneNumbers([&quot;800-555-1212&quot;, &quot;800-555-0000&quot;]);

// Serializes to a UInt8Array.
var bytes = message.serializeBinary();

var message2 = MyMessage.deserializeBinary(bytes);"><pre class="notranslate"><code>var message = new MyMessage();

message.setName("John Doe");
message.setAge(25);
message.setPhoneNumbers(["800-555-1212", "800-555-0000"]);

// Serializes to a UInt8Array.
var bytes = message.serializeBinary();

var message2 = MyMessage.deserializeBinary(bytes);
</code></pre></div>
<p dir="auto">For more examples, see the tests.  You can also look at the generated code
to see what methods are defined for your generated messages.</p>
</article></div>