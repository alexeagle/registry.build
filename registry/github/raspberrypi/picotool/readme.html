<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Building</h2><a id="user-content-building" class="anchor" aria-label="Permalink: Building" href="#building"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You need to set PICO_SDK_PATH in the environment, or pass it to cmake.</p>
<p dir="auto">You also need to install <code>libusb-1.0</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Linux / macOS</h3><a id="user-content-linux--macos" class="anchor" aria-label="Permalink: Linux / macOS" href="#linux--macos"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Use your favorite package tool to install dependencies. For example, on Ubuntu:</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="sudo apt install build-essential pkg-config libusb-1.0-0-dev cmake"><pre><span class="pl-c1">sudo apt install build-essential pkg-config libusb-1.0-0-dev cmake</span></pre></div>
<p dir="auto">On Linux you can add udev rules in order to run picotool without sudo:</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="sudo cp udev/99-picotool.rules /etc/udev/rules.d/"><pre><span class="pl-c1">sudo cp udev/99-picotool.rules /etc/udev/rules.d/</span></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Windows</h3><a id="user-content-windows" class="anchor" aria-label="Permalink: Windows" href="#windows"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h5 class="heading-element" dir="auto">For Windows without MinGW</h5><a id="user-content-for-windows-without-mingw" class="anchor" aria-label="Permalink: For Windows without MinGW" href="#for-windows-without-mingw"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Download libUSB from here <a href="https://libusb.info/" rel="nofollow">https://libusb.info/</a></p>
<p dir="auto">set LIBUSB_ROOT environment variable to the install directory.</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir build
cd build
cmake -G &quot;NMake Makefiles&quot; ..
nmake"><pre><span class="pl-c1">mkdir build</span>
<span class="pl-c1">cd build</span>
<span class="pl-c1">cmake -G "NMake Makefiles" ..</span>
<span class="pl-c1">nmake</span></pre></div>
<div class="markdown-heading" dir="auto"><h5 class="heading-element" dir="auto">For Windows with MinGW in WSL</h5><a id="user-content-for-windows-with-mingw-in-wsl" class="anchor" aria-label="Permalink: For Windows with MinGW in WSL" href="#for-windows-with-mingw-in-wsl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Download libUSB from here <a href="https://libusb.info/" rel="nofollow">https://libusb.info/</a></p>
<p dir="auto">set LIBUSB_ROOT environment variable to the install directory.</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir build
cd build
cmake ..
make"><pre><span class="pl-c1">mkdir build</span>
<span class="pl-c1">cd build</span>
<span class="pl-c1">cmake ..</span>
<span class="pl-c1">make</span></pre></div>
<div class="markdown-heading" dir="auto"><h5 class="heading-element" dir="auto">For Windows with MinGW in MSYS2:</h5><a id="user-content-for-windows-with-mingw-in-msys2" class="anchor" aria-label="Permalink: For Windows with MinGW in MSYS2:" href="#for-windows-with-mingw-in-msys2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">No need to download libusb separately or set <code>LIBUSB_ROOT</code>.</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pacman -S $MINGW_PACKAGE_PREFIX-{toolchain,cmake,libusb}
mkdir build
cd build
MSYS2_ARG_CONV_EXCL=- cmake .. -G&quot;MSYS Makefiles&quot; -DCMAKE_INSTALL_PREFIX=$MINGW_PREFIX
make
make install DESTDIR=/  # optional"><pre><span class="pl-c1">pacman -S $MINGW_PACKAGE_PREFIX-{toolchain,cmake,libusb}</span>
<span class="pl-c1">mkdir build</span>
<span class="pl-c1">cd build</span>
<span class="pl-c1">MSYS2_ARG_CONV_EXCL=- cmake .. -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX=$MINGW_PREFIX</span>
<span class="pl-c1">make</span>
<span class="pl-c1">make install DESTDIR=/  # optional</span></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Overview</h2><a id="user-content-overview" class="anchor" aria-label="Permalink: Overview" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>picotool</code> is a tool for inspecting RP2040 binaries, and interacting with RP2040 devices when they are in BOOTSEL mode. (As of version 1.1 of <code>picotool</code> it is also possible to interact with RP2040 devices that are not in BOOTSEL mode, but are using USB stdio support from the Raspberry Pi Pico SDK by using the <code>-f</code> argument of <code>picotool</code>).</p>
<p dir="auto">Note for additional documentation see <a href="https://rptl.io/pico-get-started" rel="nofollow">https://rptl.io/pico-get-started</a></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool help
PICOTOOL:
    Tool for interacting with a RP2040 device in BOOTSEL mode, or with a RP2040 binary

SYNOPSIS:
    picotool info [-b] [-p] [-d] [-l] [-a] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]
    picotool info [-b] [-p] [-d] [-l] [-a] &lt;filename&gt; [-t &lt;type&gt;]
    picotool load [-n] [-N] [-u] [-v] [-x] &lt;filename&gt; [-t &lt;type&gt;] [-o &lt;offset&gt;] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]
    picotool save [-p] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool save -a [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool save -r &lt;from&gt; &lt;to&gt; [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool verify [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;] [-r &lt;from&gt; &lt;to&gt;] [-o &lt;offset&gt;]
    picotool reboot [-a] [-u] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]
    picotool version [-s]
    picotool help [&lt;cmd&gt;]

COMMANDS:
    info      Display information from the target device(s) or file.
              Without any arguments, this will display basic information for all connected RP2040 devices in BOOTSEL mode
    load      Load the program / memory range stored in a file onto the device.
    save      Save the program / memory stored in flash on the device to a file.
    verify    Check that the device contents match those in the file.
    reboot    Reboot the device
    version   Display picotool version
    help      Show general help or help for a specific command

Use &quot;picotool help &lt;cmd&gt;&quot; for more info"><pre lang="text" class="notranslate"><code>$ picotool help
PICOTOOL:
    Tool for interacting with a RP2040 device in BOOTSEL mode, or with a RP2040 binary

SYNOPSIS:
    picotool info [-b] [-p] [-d] [-l] [-a] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]
    picotool info [-b] [-p] [-d] [-l] [-a] &lt;filename&gt; [-t &lt;type&gt;]
    picotool load [-n] [-N] [-u] [-v] [-x] &lt;filename&gt; [-t &lt;type&gt;] [-o &lt;offset&gt;] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]
    picotool save [-p] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool save -a [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool save -r &lt;from&gt; &lt;to&gt; [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool verify [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;] [-r &lt;from&gt; &lt;to&gt;] [-o &lt;offset&gt;]
    picotool reboot [-a] [-u] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]
    picotool version [-s]
    picotool help [&lt;cmd&gt;]

COMMANDS:
    info      Display information from the target device(s) or file.
              Without any arguments, this will display basic information for all connected RP2040 devices in BOOTSEL mode
    load      Load the program / memory range stored in a file onto the device.
    save      Save the program / memory stored in flash on the device to a file.
    verify    Check that the device contents match those in the file.
    reboot    Reboot the device
    version   Display picotool version
    help      Show general help or help for a specific command

Use "picotool help &lt;cmd&gt;" for more info
</code></pre></div>
<p dir="auto">Note commands that aren't acting on files require an RP2040 device in BOOTSEL mode to be connected.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">info</h2><a id="user-content-info" class="anchor" aria-label="Permalink: info" href="#info"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">So there is now <em>Binary Information</em> support in the SDK which allows for easily storing compact information that <code>picotool</code>
can find (See Binary Info section below). The info command is for reading this information.</p>
<p dir="auto">The information can be either read from one or more connected RP2040 devices in BOOTSEL mode, or from
a file. This file can be an ELF, a UF2 or a BIN file.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool help info
INFO:
    Display information from the target device(s) or file.
    Without any arguments, this will display basic information for all connected RP2040 devices in BOOTSEL mode

SYNOPSIS:
    picotool info [-b] [-p] [-d] [-l] [-a] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]
    picotool info [-b] [-p] [-d] [-l] [-a] &lt;filename&gt; [-t &lt;type&gt;]

OPTIONS:
    Information to display
        -b, --basic
            Include basic information. This is the default
        -p, --pins
            Include pin information
        -d, --device
            Include device information
        -l, --build
            Include build attributes
        -a, --all
            Include all information

TARGET SELECTION:
    To target one or more connected RP2040 device(s) in BOOTSEL mode (the default)
        --bus &lt;bus&gt;
            Filter devices by USB bus number
        --address &lt;addr&gt;
            Filter devices by USB device address
        -f, --force
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be rebooted back to application mode
        -F, --force-no-reboot
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be left connected and accessible to picotool, but
            without the RPI-RP2 drive mounted
    To target a file
        &lt;filename&gt;
            The file name
        -t &lt;type&gt;
            Specify file type (uf2 | elf | bin) explicitly, ignoring file extension"><pre lang="text" class="notranslate"><code>$ picotool help info
INFO:
    Display information from the target device(s) or file.
    Without any arguments, this will display basic information for all connected RP2040 devices in BOOTSEL mode

SYNOPSIS:
    picotool info [-b] [-p] [-d] [-l] [-a] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]
    picotool info [-b] [-p] [-d] [-l] [-a] &lt;filename&gt; [-t &lt;type&gt;]

OPTIONS:
    Information to display
        -b, --basic
            Include basic information. This is the default
        -p, --pins
            Include pin information
        -d, --device
            Include device information
        -l, --build
            Include build attributes
        -a, --all
            Include all information

TARGET SELECTION:
    To target one or more connected RP2040 device(s) in BOOTSEL mode (the default)
        --bus &lt;bus&gt;
            Filter devices by USB bus number
        --address &lt;addr&gt;
            Filter devices by USB device address
        -f, --force
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be rebooted back to application mode
        -F, --force-no-reboot
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be left connected and accessible to picotool, but
            without the RPI-RP2 drive mounted
    To target a file
        &lt;filename&gt;
            The file name
        -t &lt;type&gt;
            Specify file type (uf2 | elf | bin) explicitly, ignoring file extension
</code></pre></div>
<p dir="auto">Note the -f arguments vary slightly for Windows vs macOS / Unix platforms.</p>
<p dir="auto">e.g.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool info
Program Information
 name:      hello_world
 features:  stdout to UART"><pre lang="text" class="notranslate"><code>$ picotool info
Program Information
 name:      hello_world
 features:  stdout to UART
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool info -a
Program Information
 name:          hello_world
 features:      stdout to UART
 binary start:  0x10000000
 binary end:    0x1000606c

Fixed Pin Information
 20:  UART1 TX
 21:  UART1 RX

Build Information
 build date:        Dec 31 2020
 build attributes:  Debug build

Device Information
 flash size:   2048K
 ROM version:  2"><pre lang="text" class="notranslate"><code>$ picotool info -a
Program Information
 name:          hello_world
 features:      stdout to UART
 binary start:  0x10000000
 binary end:    0x1000606c

Fixed Pin Information
 20:  UART1 TX
 21:  UART1 RX

Build Information
 build date:        Dec 31 2020
 build attributes:  Debug build

Device Information
 flash size:   2048K
 ROM version:  2
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool info -bp
Program Information
 name:      hello_world
 features:  stdout to UART

Fixed Pin Information
 20:  UART1 TX
 21:  UART1 RX"><pre lang="text" class="notranslate"><code>$ picotool info -bp
Program Information
 name:      hello_world
 features:  stdout to UART

Fixed Pin Information
 20:  UART1 TX
 21:  UART1 RX
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool info -a lcd_1602_i2c.uf2
File lcd_1602_i2c.uf2:

Program Information
 name:          lcd_1602_i2c
 web site:      https://github.com/raspberrypi/pico-examples/tree/HEAD/i2c/lcd_1602_i2c
 binary start:  0x10000000
 binary end:    0x10003c1c

Fixed Pin Information
 4:  I2C0 SDA
 5:  I2C0 SCL

Build Information
 build date:  Dec 31 2020"><pre lang="text" class="notranslate"><code>$ picotool info -a lcd_1602_i2c.uf2
File lcd_1602_i2c.uf2:

Program Information
 name:          lcd_1602_i2c
 web site:      https://github.com/raspberrypi/pico-examples/tree/HEAD/i2c/lcd_1602_i2c
 binary start:  0x10000000
 binary end:    0x10003c1c

Fixed Pin Information
 4:  I2C0 SDA
 5:  I2C0 SCL

Build Information
 build date:  Dec 31 2020
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">load</h2><a id="user-content-load" class="anchor" aria-label="Permalink: load" href="#load"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Load allows you to write data from a file into flash</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool help load
LOAD:
    Load the program / memory range stored in a file onto the device.

SYNOPSIS:
    picotool load [-n] [-N] [-u] [-v] [-x] &lt;filename&gt; [-t &lt;type&gt;] [-o &lt;offset&gt;] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]

OPTIONS:
    Post load actions
        -n, --no-overwrite
            When writing flash data, do not overwrite an existing program in flash. If picotool cannot determine the size/presence
            of the program in flash, the command fails
        -N, --no-overwrite-unsafe
            When writing flash data, do not overwrite an existing program in flash. If picotool cannot determine the size/presence
            of the program in flash, the load continues anyway
        -u, --update
            Skip writing flash sectors that already contain identical data
        -v, --verify
            Verify the data was written correctly
        -x, --execute
            Attempt to execute the downloaded file as a program after the load
    File to load from
        &lt;filename&gt;
            The file name
        -t &lt;type&gt;
            Specify file type (uf2 | elf | bin) explicitly, ignoring file extension
    BIN file options
        -o, --offset
            Specify the load address for a BIN file
        &lt;offset&gt;
            Load offset (memory address; default 0x10000000)
    Target device selection
        --bus &lt;bus&gt;
            Filter devices by USB bus number
        --address &lt;addr&gt;
            Filter devices by USB device address
        -f, --force
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be rebooted back to application mode
        -F, --force-no-reboot
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be left connected and accessible to picotool, but
            without the RPI-RP2 drive mounted"><pre lang="text" class="notranslate"><code>$ picotool help load
LOAD:
    Load the program / memory range stored in a file onto the device.

SYNOPSIS:
    picotool load [-n] [-N] [-u] [-v] [-x] &lt;filename&gt; [-t &lt;type&gt;] [-o &lt;offset&gt;] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F]

OPTIONS:
    Post load actions
        -n, --no-overwrite
            When writing flash data, do not overwrite an existing program in flash. If picotool cannot determine the size/presence
            of the program in flash, the command fails
        -N, --no-overwrite-unsafe
            When writing flash data, do not overwrite an existing program in flash. If picotool cannot determine the size/presence
            of the program in flash, the load continues anyway
        -u, --update
            Skip writing flash sectors that already contain identical data
        -v, --verify
            Verify the data was written correctly
        -x, --execute
            Attempt to execute the downloaded file as a program after the load
    File to load from
        &lt;filename&gt;
            The file name
        -t &lt;type&gt;
            Specify file type (uf2 | elf | bin) explicitly, ignoring file extension
    BIN file options
        -o, --offset
            Specify the load address for a BIN file
        &lt;offset&gt;
            Load offset (memory address; default 0x10000000)
    Target device selection
        --bus &lt;bus&gt;
            Filter devices by USB bus number
        --address &lt;addr&gt;
            Filter devices by USB device address
        -f, --force
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be rebooted back to application mode
        -F, --force-no-reboot
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be left connected and accessible to picotool, but
            without the RPI-RP2 drive mounted
</code></pre></div>
<p dir="auto">e.g.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool load blink.uf2
Loading into Flash: [==============================]  100%"><pre lang="text" class="notranslate"><code>$ picotool load blink.uf2
Loading into Flash: [==============================]  100%
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">save</h2><a id="user-content-save" class="anchor" aria-label="Permalink: save" href="#save"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Save allows you to save a range of memory or a program or the whole of flash from the device to a BIN file or a UF2 file</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool help save
SAVE:
    Save the program / memory stored in flash on the device to a file.

SYNOPSIS:
    picotool save [-p] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool save -a [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool save -r &lt;from&gt; &lt;to&gt; [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]

OPTIONS:
    Selection of data to save
        -p, --program
            Save the installed program only. This is the default
        -a, --all
            Save all of flash memory
        -r, --range
            Save a range of memory. Note that UF2s always store complete 256 byte-aligned blocks of 256 bytes, and the range is
            expanded accordingly
        &lt;from&gt;
            The lower address bound in hex
        &lt;to&gt;
            The upper address bound in hex
    Source device selection
        --bus &lt;bus&gt;
            Filter devices by USB bus number
        --address &lt;addr&gt;
            Filter devices by USB device address
        -f, --force
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be rebooted back to application mode
        -F, --force-no-reboot
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be left connected and accessible to picotool, but
            without the RPI-RP2 drive mounted
    File to save to
        &lt;filename&gt;
            The file name
        -t &lt;type&gt;
            Specify file type (uf2 | elf | bin) explicitly, ignoring file extension"><pre lang="text" class="notranslate"><code>$ picotool help save
SAVE:
    Save the program / memory stored in flash on the device to a file.

SYNOPSIS:
    picotool save [-p] [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool save -a [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]
    picotool save -r &lt;from&gt; &lt;to&gt; [--bus &lt;bus&gt;] [--address &lt;addr&gt;] [-f] [-F] &lt;filename&gt; [-t &lt;type&gt;]

OPTIONS:
    Selection of data to save
        -p, --program
            Save the installed program only. This is the default
        -a, --all
            Save all of flash memory
        -r, --range
            Save a range of memory. Note that UF2s always store complete 256 byte-aligned blocks of 256 bytes, and the range is
            expanded accordingly
        &lt;from&gt;
            The lower address bound in hex
        &lt;to&gt;
            The upper address bound in hex
    Source device selection
        --bus &lt;bus&gt;
            Filter devices by USB bus number
        --address &lt;addr&gt;
            Filter devices by USB device address
        -f, --force
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be rebooted back to application mode
        -F, --force-no-reboot
            Force a device not in BOOTSEL mode but running compatible code to reset so the command can be executed. After executing
            the command (unless the command itself is a 'reboot') the device will be left connected and accessible to picotool, but
            without the RPI-RP2 drive mounted
    File to save to
        &lt;filename&gt;
            The file name
        -t &lt;type&gt;
            Specify file type (uf2 | elf | bin) explicitly, ignoring file extension
</code></pre></div>
<p dir="auto">e.g.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool info
Program Information
name:      lcd_1602_i2c
web site:  https://github.com/raspberrypi/pico-examples/tree/HEAD/i2c/lcd_1602_i2c"><pre lang="text" class="notranslate"><code>$ picotool info
Program Information
name:      lcd_1602_i2c
web site:  https://github.com/raspberrypi/pico-examples/tree/HEAD/i2c/lcd_1602_i2c
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool save spoon.uf2
Saving file: [==============================]  100%
Wrote 51200 bytes to spoon.uf2"><pre lang="text" class="notranslate"><code>$ picotool save spoon.uf2
Saving file: [==============================]  100%
Wrote 51200 bytes to spoon.uf2
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool info spoon.uf2
File spoon.uf2:
Program Information
name:      lcd_1602_i2c
web site:  https://github.com/raspberrypi/pico-examples/tree/HEAD/i2c/lcd_1602_i2c"><pre lang="text" class="notranslate"><code>$ picotool info spoon.uf2
File spoon.uf2:
Program Information
name:      lcd_1602_i2c
web site:  https://github.com/raspberrypi/pico-examples/tree/HEAD/i2c/lcd_1602_i2c
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Binary Information</h2><a id="user-content-binary-information" class="anchor" aria-label="Permalink: Binary Information" href="#binary-information"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Binary information is machine locatable and generally machine consumable. I say generally because anyone can
include any information, and we can tell it from ours, but it is up to them whether they make their data self describing.</p>
<p dir="auto">Note that we will certainly add more binary info over time, but I'd like to get a minimum core set included
in most binaries from launch!!</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Basic Information</h3><a id="user-content-basic-information" class="anchor" aria-label="Permalink: Basic Information" href="#basic-information"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This information is really handy when you pick up a Pico and don't know what is on it!</p>
<p dir="auto">Basic information includes</p>
<ul dir="auto">
<li>program name</li>
<li>program description</li>
<li>program version string</li>
<li>program build date</li>
<li>program url</li>
<li>program end address</li>
<li>program features - this is a list built from individual strings in the binary, that can be displayed (e.g. we will have one for UART stdio and one for USB stdio) in the SDK</li>
<li>build attributes - this is a similar list of strings, for things pertaining to the binary itself (e.g. Debug Build)</li>
</ul>
<p dir="auto">The binary information is self-describing/extensible, so programs can include information picotool is not aware of (e.g. MicroPython includes a list of in-built libraries)</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Pins</h3><a id="user-content-pins" class="anchor" aria-label="Permalink: Pins" href="#pins"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This is certainly handy when you have an executable called 'hello_world.elf' but you forgot what board it is built for...</p>
<p dir="auto">Static (fixed) pin assignments can be recorded in the binary in very compact form:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool info --pins sprite_demo.elf
File sprite_demo.elf:

Fixed Pin Information
0-4:    Red 0-4
6-10:   Green 0-4
11-15:  Blue 0-4
16:     HSync
17:     VSync
18:     Display Enable
19:     Pixel Clock
20:     UART1 TX
21:     UART1 RX"><pre lang="text" class="notranslate"><code>$ picotool info --pins sprite_demo.elf
File sprite_demo.elf:

Fixed Pin Information
0-4:    Red 0-4
6-10:   Green 0-4
11-15:  Blue 0-4
16:     HSync
17:     VSync
18:     Display Enable
19:     Pixel Clock
20:     UART1 TX
21:     UART1 RX
</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Including Binary information</h3><a id="user-content-including-binary-information" class="anchor" aria-label="Permalink: Including Binary information" href="#including-binary-information"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Binary information is declared in the program by macros (vile warped macros); for the previous example:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ picotool info --pins sprite_demo.elf
File sprite_demo.elf:

Fixed Pin Information
0-4:    Red 0-4
6-10:   Green 0-4
11-15:  Blue 0-4
16:     HSync
17:     VSync
18:     Display Enable
19:     Pixel Clock
20:     UART1 TX
21:     UART1 RX"><pre lang="text" class="notranslate"><code>$ picotool info --pins sprite_demo.elf
File sprite_demo.elf:

Fixed Pin Information
0-4:    Red 0-4
6-10:   Green 0-4
11-15:  Blue 0-4
16:     HSync
17:     VSync
18:     Display Enable
19:     Pixel Clock
20:     UART1 TX
21:     UART1 RX
</code></pre></div>
<p dir="auto">... there is one line in the <code>setup_default_uart</code> function:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bi_decl_if_func_used(bi_2pins_with_func(PICO_DEFAULT_UART_RX_PIN, PICO_DEFAULT_UART_TX_PIN, GPIO_FUNC_UART));"><pre><span class="pl-en">bi_decl_if_func_used</span>(<span class="pl-en">bi_2pins_with_func</span>(<span class="pl-c1">PICO_DEFAULT_UART_RX_PIN</span>, <span class="pl-c1">PICO_DEFAULT_UART_TX_PIN</span>, <span class="pl-c1">GPIO_FUNC_UART</span>));</pre></div>
<p dir="auto">The two pin numbers, and the function UART are stored, then decoded to their actual function names (UART1 TX etc) by picotool.
The <code>bi_decl_if_func_used</code> makes sure the binary information is only included if the containing function is called.</p>
<p dir="auto">Equally, the video code contains a few lines like this:</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bi_decl_if_func_used(bi_pin_mask_with_name(0x1f &lt;&lt; (PICO_SCANVIDEO_COLOR_PIN_BASE + PICO_SCANVIDEO_DPI_PIXEL_RSHIFT), &quot;Red 0-4&quot;));"><pre><span class="pl-en">bi_decl_if_func_used</span>(<span class="pl-en">bi_pin_mask_with_name</span>(<span class="pl-c1">0x1f</span> &lt;&lt; (<span class="pl-c1">PICO_SCANVIDEO_COLOR_PIN_BASE</span> <span class="pl-c1">+</span> <span class="pl-c1">PICO_SCANVIDEO_DPI_PIXEL_RSHIFT</span>), <span class="pl-s">"Red 0-4"</span>));</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Details</h3><a id="user-content-details" class="anchor" aria-label="Permalink: Details" href="#details"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Things are designed to waste as little space as possible, but you can turn everything off with preprocessor var <code>PICO_NO_BINARY_INFO=1</code>. Additionally
any SDK code that inserts binary info can be separately excluded by its own preprocesor var.</p>
<p dir="auto">You need</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &quot;pico/binary_info.h&quot;"><pre><span class="pl-k">#include</span> <span class="pl-s">"pico/binary_info.h"</span></pre></div>
<p dir="auto">Basically you either use <code>bi_decl(bi_blah(...))</code> for unconditional inclusion of the binary info blah, or
<code>bi_decl_if_func_used(bi_blah(...))</code> for binary information that may be stripped if the enclosing function
is not included in the binary by the linker (think <code>--gc-sections</code>)</p>
<p dir="auto">There are a bunch of bi_ macros in the headers</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#define bi_binary_end(end) ...
#define bi_program_name(name) ...
#define bi_program_description(description) ...
#define bi_program_version_string(version_string) ...
#define bi_program_build_date_string(date_string) ...
#define bi_program_url(url) ...
#define bi_program_feature(feature) ...
#define bi_program_build_attribute(attr) ...
#define bi_1pin_with_func(p0, func) ...
#define bi_2pins_with_func(p0, p1, func) ...
#define bi_3pins_with_func(p0, p1, p2, func) ...
#define bi_4pins_with_func(p0, p1, p2, p3, func) ...
#define bi_5pins_with_func(p0, p1, p2, p3, p4, func) ...
#define bi_pin_range_with_func(plo, phi, func) ...
#define bi_pin_mask_with_name(pmask, label) ...
#define bi_pin_mask_with_names(pmask, label) ...
#define bi_1pin_with_name(p0, name) ...
#define bi_2pins_with_names(p0, name0, p1, name1) ...
#define bi_3pins_with_names(p0, name0, p1, name1, p2, name2) ...
#define bi_4pins_with_names(p0, name0, p1, name1, p2, name2, p3, name3) ... "><pre><span class="pl-k">#define</span> <span class="pl-en">bi_binary_end</span>(<span class="pl-s1">end</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_program_name</span>(<span class="pl-s1">name</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_program_description</span>(<span class="pl-s1">description</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_program_version_string</span>(<span class="pl-s1">version_string</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_program_build_date_string</span>(<span class="pl-s1">date_string</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_program_url</span>(<span class="pl-s1">url</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_program_feature</span>(<span class="pl-s1">feature</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_program_build_attribute</span>(<span class="pl-s1">attr</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_1pin_with_func</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">func</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_2pins_with_func</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">p1</span>, <span class="pl-s1">func</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_3pins_with_func</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">p1</span>, <span class="pl-s1">p2</span>, <span class="pl-s1">func</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_4pins_with_func</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">p1</span>, <span class="pl-s1">p2</span>, <span class="pl-s1">p3</span>, <span class="pl-s1">func</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_5pins_with_func</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">p1</span>, <span class="pl-s1">p2</span>, <span class="pl-s1">p3</span>, <span class="pl-s1">p4</span>, <span class="pl-s1">func</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_pin_range_with_func</span>(<span class="pl-s1">plo</span>, <span class="pl-s1">phi</span>, <span class="pl-s1">func</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_pin_mask_with_name</span>(<span class="pl-s1">pmask</span>, <span class="pl-s1">label</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_pin_mask_with_names</span>(<span class="pl-s1">pmask</span>, <span class="pl-s1">label</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_1pin_with_name</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">name</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_2pins_with_names</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">name0</span>, <span class="pl-s1">p1</span>, <span class="pl-s1">name1</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_3pins_with_names</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">name0</span>, <span class="pl-s1">p1</span>, <span class="pl-s1">name1</span>, <span class="pl-s1">p2</span>, <span class="pl-s1">name2</span>) ...
<span class="pl-k">#define</span> <span class="pl-en">bi_4pins_with_names</span>(<span class="pl-s1">p0</span>, <span class="pl-s1">name0</span>, <span class="pl-s1">p1</span>, <span class="pl-s1">name1</span>, <span class="pl-s1">p2</span>, <span class="pl-s1">name2</span>, <span class="pl-s1">p3</span>, <span class="pl-s1">name3</span>) ... </pre></div>
<p dir="auto">which make use of underlying macros, e.g.</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#define bi_program_url(url) bi_string(BINARY_INFO_TAG_RASPBERRY_PI, BINARY_INFO_ID_RP_PROGRAM_URL, url)"><pre><span class="pl-k">#define</span> <span class="pl-en">bi_program_url</span>(<span class="pl-s1">url</span>) bi_string(BINARY_INFO_TAG_RASPBERRY_PI, BINARY_INFO_ID_RP_PROGRAM_URL, url)</pre></div>
<p dir="auto">NOTE: It is easy to forget to enclose these in <code>bi_decl</code> etc., so an effort has been made (at the expense of a lot of kittens)
to make the build fail with a <em>somewhat</em> helpful error message if you do so.</p>
<p dir="auto">For example, trying to compile</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bi_1pin_with_name(0, &quot;Toaster activator&quot;);"><pre><span class="pl-en">bi_1pin_with_name</span>(<span class="pl-c1">0</span>, <span class="pl-s">"Toaster activator"</span>);</pre></div>
<p dir="auto">gives</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="/home/graham/dev/mu/pico_sdk/src/common/pico_binary_info/include/pico/binary_info/code.h:17:55: error: '_error_bi_is_missing_enclosing_decl_261' undeclared here (not in a function)
17 | #define __bi_enclosure_check_lineno_var_name __CONCAT(_error_bi_is_missing_enclosing_decl_,__LINE__)
|                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... more macro call stack of doom"><pre class="notranslate"><code>/home/graham/dev/mu/pico_sdk/src/common/pico_binary_info/include/pico/binary_info/code.h:17:55: error: '_error_bi_is_missing_enclosing_decl_261' undeclared here (not in a function)
17 | #define __bi_enclosure_check_lineno_var_name __CONCAT(_error_bi_is_missing_enclosing_decl_,__LINE__)
|                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
... more macro call stack of doom
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Setting common fields from CMake</h2><a id="user-content-setting-common-fields-from-cmake" class="anchor" aria-label="Permalink: Setting common fields from CMake" href="#setting-common-fields-from-cmake"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can use</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pico_set_program_name(foo &quot;not foo&quot;) # as &quot;foo&quot; would be the default
pico_set_program_description(foo &quot;this is a foo&quot;)
pico_set_program_version(foo &quot;0.00001a&quot;)
pico_set_program_url(foo &quot;www.plinth.com/foo&quot;)"><pre>pico_set_program_name(foo <span class="pl-s">"not foo"</span>) <span class="pl-c"><span class="pl-c">#</span> as "foo" would be the default</span>
pico_set_program_description(foo <span class="pl-s">"this is a foo"</span>)
pico_set_program_version(foo <span class="pl-s">"0.00001a"</span>)
pico_set_program_url(foo <span class="pl-s">"www.plinth.com/foo"</span>)</pre></div>
<p dir="auto">Note all of these are passed as command line arguments to the compilation, so if you plan to use
quotes, newlines etc you may have better luck defining via bi_decl in the code.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Additional binary information/picotool features</h2><a id="user-content-additional-binary-informationpicotool-features" class="anchor" aria-label="Permalink: Additional binary information/picotool features" href="#additional-binary-informationpicotool-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Block devices</h3><a id="user-content-block-devices" class="anchor" aria-label="Permalink: Block devices" href="#block-devices"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">MicroPython and CircuitPython, eventually the SDK and others may support one or more storage devices in flash. We already
have macros to define these although picotool doesn't do anything with them yet... but backup/restore/file copy and even fuse mount
in the future might be interesting.</p>
<p dir="auto">I suggest we tag these now...</p>
<p dir="auto">This is what I have right now off the top of my head (at the time)</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#define bi_block_device(_tag, _name, _offset, _size, _extra, _flags)"><pre><span class="pl-k">#define</span> <span class="pl-en">bi_block_device</span>(<span class="pl-s1">_tag</span>, <span class="pl-s1">_name</span>, <span class="pl-s1">_offset</span>, <span class="pl-s1">_size</span>, <span class="pl-s1">_extra</span>, <span class="pl-s1">_flags</span>)</pre></div>
<p dir="auto">with the data going into</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="typedef struct __packed _binary_info_block_device {
        struct _binary_info_core core;
        bi_ptr_of(const char) name; // optional static name (independent of what is formatted)
        uint32_t offset;
        uint32_t size;
        bi_ptr_of(binary_info_t) extra; // additional info
        uint16_t flags;
} binary_info_block_device_t;"><pre><span class="pl-k">typedef</span> <span class="pl-k">struct</span> <span class="pl-smi">__packed</span> <span class="pl-smi">_binary_info_block_device</span> {
        <span class="pl-k">struct</span> <span class="pl-smi">_binary_info_core</span> <span class="pl-s1">core</span>;
        <span class="pl-s1">bi_ptr_of</span>(<span class="pl-k">const</span> <span class="pl-smi">char</span>) <span class="pl-s1">name</span>; <span class="pl-c">// optional static name (independent of what is formatted)</span>
        <span class="pl-smi">uint32_t</span> <span class="pl-s1">offset</span>;
        <span class="pl-smi">uint32_t</span> <span class="pl-s1">size</span>;
        <span class="pl-s1">bi_ptr_of</span>(<span class="pl-smi">binary_info_t</span>) <span class="pl-s1">extra</span>; <span class="pl-c">// additional info</span>
        <span class="pl-smi">uint16_t</span> <span class="pl-s1">flags</span>;
} <span class="pl-smi">binary_info_block_device_t</span>;</pre></div>
<p dir="auto">and</p>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="enum {
    BINARY_INFO_BLOCK_DEV_FLAG_READ = 1 &lt;&lt; 0, // if not readable, then it is basically hidden, but tools may choose to avoid overwriting it
    BINARY_INFO_BLOCK_DEV_FLAG_WRITE = 1 &lt;&lt; 1,
    BINARY_INFO_BLOCK_DEV_FLAG_REFORMAT = 1 &lt;&lt; 2, // may be reformatted..

    BINARY_INFO_BLOCK_DEV_FLAG_PT_UNKNOWN = 0 &lt;&lt; 4, // unknown free to look
    BINARY_INFO_BLOCK_DEV_FLAG_PT_MBR = 1 &lt;&lt; 4, // expect MBR
    BINARY_INFO_BLOCK_DEV_FLAG_PT_GPT = 2 &lt;&lt; 4, // expect GPT
    BINARY_INFO_BLOCK_DEV_FLAG_PT_NONE = 3 &lt;&lt; 4, // no partition table
};"><pre><span class="pl-k">enum</span> {
    <span class="pl-c1">BINARY_INFO_BLOCK_DEV_FLAG_READ</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span> &lt;&lt; <span class="pl-c1">0</span>, <span class="pl-c">// if not readable, then it is basically hidden, but tools may choose to avoid overwriting it</span>
    <span class="pl-c1">BINARY_INFO_BLOCK_DEV_FLAG_WRITE</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span> &lt;&lt; <span class="pl-c1">1</span>,
    <span class="pl-c1">BINARY_INFO_BLOCK_DEV_FLAG_REFORMAT</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span> &lt;&lt; <span class="pl-c1">2</span>, <span class="pl-c">// may be reformatted..</span>

    <span class="pl-c1">BINARY_INFO_BLOCK_DEV_FLAG_PT_UNKNOWN</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span> &lt;&lt; <span class="pl-c1">4</span>, <span class="pl-c">// unknown free to look</span>
    <span class="pl-c1">BINARY_INFO_BLOCK_DEV_FLAG_PT_MBR</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span> &lt;&lt; <span class="pl-c1">4</span>, <span class="pl-c">// expect MBR</span>
    <span class="pl-c1">BINARY_INFO_BLOCK_DEV_FLAG_PT_GPT</span> <span class="pl-c1">=</span> <span class="pl-c1">2</span> &lt;&lt; <span class="pl-c1">4</span>, <span class="pl-c">// expect GPT</span>
    <span class="pl-c1">BINARY_INFO_BLOCK_DEV_FLAG_PT_NONE</span> <span class="pl-c1">=</span> <span class="pl-c1">3</span> &lt;&lt; <span class="pl-c1">4</span>, <span class="pl-c">// no partition table</span>
};</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">USB device descriptors</h3><a id="user-content-usb-device-descriptors" class="anchor" aria-label="Permalink: USB device descriptors" href="#usb-device-descriptors"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Seems like tagging these might be nice (we just need to store the pointer to it assuming - as is often the case -
the descriptor is just a linear chunk of memory) ... I assume there is a tool out there to prettify such a thing if picotool dumps the descriptor
in binary.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Issues</h3><a id="user-content-issues" class="anchor" aria-label="Permalink: Issues" href="#issues"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you ctrl+c out of the middle of a long operation, then libusb seems to get a bit confused, which means we aren't able
to unlock our lockout of USB MSD writes (we have turned them off so the user doesn't step on their own toes). Simply running
<code>picotool info</code> again will unlock it properly the next time (or you can reboot the device).</p>
</article></div>